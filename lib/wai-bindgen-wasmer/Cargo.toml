[package]
name = "wai-bindgen-wasmer"
description = "Generate WAI glue for a Rust Wasmer host"
version = "0.700.0-rc.1"
categories = ["wasm", "os"]
keywords = ["wasm", "webassembly", "wasi", "sandbox", "ABI"]
readme = "README.md"
authors.workspace = true
edition.workspace = true
homepage.workspace = true
license.workspace = true
repository.workspace = true
rust-version.workspace = true

[dependencies]
anyhow.workspace = true
async-trait = { workspace = true, optional = true }
bitflags.workspace = true
once_cell.workspace = true
thiserror.workspace = true
tracing = { workspace = true, optional = true }
wai-bindgen-wasmer-impl.workspace = true
wasmer = { version = "=7.0.0-rc.1", path = "../api", default-features = false }

[features]
# Enables generated code to emit events via the `tracing` crate whenever wasm is
# entered and when native functions are called. Note that tracing is currently
# only done for imported functions.
tracing = ["dep:tracing", "wai-bindgen-wasmer-impl/tracing"]

# Enables async support for generated code, although when enabled this still
# needs to be configured through the macro invocation.
async = ["async-trait", "wai-bindgen-wasmer-impl/async"]

# Wasmer features
js = ["wasmer/js-default"]
sys = ["wasmer/sys-default"]

# Wasmer compiler (with `sys` feature only)
cranelift = ["wasmer/cranelift"]
singlepass = ["wasmer/singlepass"]
llvm = ["wasmer/llvm"]

[package.metadata.docs.rs]
features = ["wasmer/sys", "wasmer/cranelift"]
rustc-args = ["--cfg", "docsrs"]
cargo-args = ["--no-deps"]
