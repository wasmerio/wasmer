<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source to the Rust file `/Users/syrusakbary/.cargo/registry/src/github.com-1ecc6299db9ec823/goblin-0.0.24/src/mach/load_command.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>load_command.rs.html -- source</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../goblin/index.html'><div class='logo-container'><img src='../../../rust-logo.png' alt='logo'></div></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">   1</span>
<span id="2">   2</span>
<span id="3">   3</span>
<span id="4">   4</span>
<span id="5">   5</span>
<span id="6">   6</span>
<span id="7">   7</span>
<span id="8">   8</span>
<span id="9">   9</span>
<span id="10">  10</span>
<span id="11">  11</span>
<span id="12">  12</span>
<span id="13">  13</span>
<span id="14">  14</span>
<span id="15">  15</span>
<span id="16">  16</span>
<span id="17">  17</span>
<span id="18">  18</span>
<span id="19">  19</span>
<span id="20">  20</span>
<span id="21">  21</span>
<span id="22">  22</span>
<span id="23">  23</span>
<span id="24">  24</span>
<span id="25">  25</span>
<span id="26">  26</span>
<span id="27">  27</span>
<span id="28">  28</span>
<span id="29">  29</span>
<span id="30">  30</span>
<span id="31">  31</span>
<span id="32">  32</span>
<span id="33">  33</span>
<span id="34">  34</span>
<span id="35">  35</span>
<span id="36">  36</span>
<span id="37">  37</span>
<span id="38">  38</span>
<span id="39">  39</span>
<span id="40">  40</span>
<span id="41">  41</span>
<span id="42">  42</span>
<span id="43">  43</span>
<span id="44">  44</span>
<span id="45">  45</span>
<span id="46">  46</span>
<span id="47">  47</span>
<span id="48">  48</span>
<span id="49">  49</span>
<span id="50">  50</span>
<span id="51">  51</span>
<span id="52">  52</span>
<span id="53">  53</span>
<span id="54">  54</span>
<span id="55">  55</span>
<span id="56">  56</span>
<span id="57">  57</span>
<span id="58">  58</span>
<span id="59">  59</span>
<span id="60">  60</span>
<span id="61">  61</span>
<span id="62">  62</span>
<span id="63">  63</span>
<span id="64">  64</span>
<span id="65">  65</span>
<span id="66">  66</span>
<span id="67">  67</span>
<span id="68">  68</span>
<span id="69">  69</span>
<span id="70">  70</span>
<span id="71">  71</span>
<span id="72">  72</span>
<span id="73">  73</span>
<span id="74">  74</span>
<span id="75">  75</span>
<span id="76">  76</span>
<span id="77">  77</span>
<span id="78">  78</span>
<span id="79">  79</span>
<span id="80">  80</span>
<span id="81">  81</span>
<span id="82">  82</span>
<span id="83">  83</span>
<span id="84">  84</span>
<span id="85">  85</span>
<span id="86">  86</span>
<span id="87">  87</span>
<span id="88">  88</span>
<span id="89">  89</span>
<span id="90">  90</span>
<span id="91">  91</span>
<span id="92">  92</span>
<span id="93">  93</span>
<span id="94">  94</span>
<span id="95">  95</span>
<span id="96">  96</span>
<span id="97">  97</span>
<span id="98">  98</span>
<span id="99">  99</span>
<span id="100"> 100</span>
<span id="101"> 101</span>
<span id="102"> 102</span>
<span id="103"> 103</span>
<span id="104"> 104</span>
<span id="105"> 105</span>
<span id="106"> 106</span>
<span id="107"> 107</span>
<span id="108"> 108</span>
<span id="109"> 109</span>
<span id="110"> 110</span>
<span id="111"> 111</span>
<span id="112"> 112</span>
<span id="113"> 113</span>
<span id="114"> 114</span>
<span id="115"> 115</span>
<span id="116"> 116</span>
<span id="117"> 117</span>
<span id="118"> 118</span>
<span id="119"> 119</span>
<span id="120"> 120</span>
<span id="121"> 121</span>
<span id="122"> 122</span>
<span id="123"> 123</span>
<span id="124"> 124</span>
<span id="125"> 125</span>
<span id="126"> 126</span>
<span id="127"> 127</span>
<span id="128"> 128</span>
<span id="129"> 129</span>
<span id="130"> 130</span>
<span id="131"> 131</span>
<span id="132"> 132</span>
<span id="133"> 133</span>
<span id="134"> 134</span>
<span id="135"> 135</span>
<span id="136"> 136</span>
<span id="137"> 137</span>
<span id="138"> 138</span>
<span id="139"> 139</span>
<span id="140"> 140</span>
<span id="141"> 141</span>
<span id="142"> 142</span>
<span id="143"> 143</span>
<span id="144"> 144</span>
<span id="145"> 145</span>
<span id="146"> 146</span>
<span id="147"> 147</span>
<span id="148"> 148</span>
<span id="149"> 149</span>
<span id="150"> 150</span>
<span id="151"> 151</span>
<span id="152"> 152</span>
<span id="153"> 153</span>
<span id="154"> 154</span>
<span id="155"> 155</span>
<span id="156"> 156</span>
<span id="157"> 157</span>
<span id="158"> 158</span>
<span id="159"> 159</span>
<span id="160"> 160</span>
<span id="161"> 161</span>
<span id="162"> 162</span>
<span id="163"> 163</span>
<span id="164"> 164</span>
<span id="165"> 165</span>
<span id="166"> 166</span>
<span id="167"> 167</span>
<span id="168"> 168</span>
<span id="169"> 169</span>
<span id="170"> 170</span>
<span id="171"> 171</span>
<span id="172"> 172</span>
<span id="173"> 173</span>
<span id="174"> 174</span>
<span id="175"> 175</span>
<span id="176"> 176</span>
<span id="177"> 177</span>
<span id="178"> 178</span>
<span id="179"> 179</span>
<span id="180"> 180</span>
<span id="181"> 181</span>
<span id="182"> 182</span>
<span id="183"> 183</span>
<span id="184"> 184</span>
<span id="185"> 185</span>
<span id="186"> 186</span>
<span id="187"> 187</span>
<span id="188"> 188</span>
<span id="189"> 189</span>
<span id="190"> 190</span>
<span id="191"> 191</span>
<span id="192"> 192</span>
<span id="193"> 193</span>
<span id="194"> 194</span>
<span id="195"> 195</span>
<span id="196"> 196</span>
<span id="197"> 197</span>
<span id="198"> 198</span>
<span id="199"> 199</span>
<span id="200"> 200</span>
<span id="201"> 201</span>
<span id="202"> 202</span>
<span id="203"> 203</span>
<span id="204"> 204</span>
<span id="205"> 205</span>
<span id="206"> 206</span>
<span id="207"> 207</span>
<span id="208"> 208</span>
<span id="209"> 209</span>
<span id="210"> 210</span>
<span id="211"> 211</span>
<span id="212"> 212</span>
<span id="213"> 213</span>
<span id="214"> 214</span>
<span id="215"> 215</span>
<span id="216"> 216</span>
<span id="217"> 217</span>
<span id="218"> 218</span>
<span id="219"> 219</span>
<span id="220"> 220</span>
<span id="221"> 221</span>
<span id="222"> 222</span>
<span id="223"> 223</span>
<span id="224"> 224</span>
<span id="225"> 225</span>
<span id="226"> 226</span>
<span id="227"> 227</span>
<span id="228"> 228</span>
<span id="229"> 229</span>
<span id="230"> 230</span>
<span id="231"> 231</span>
<span id="232"> 232</span>
<span id="233"> 233</span>
<span id="234"> 234</span>
<span id="235"> 235</span>
<span id="236"> 236</span>
<span id="237"> 237</span>
<span id="238"> 238</span>
<span id="239"> 239</span>
<span id="240"> 240</span>
<span id="241"> 241</span>
<span id="242"> 242</span>
<span id="243"> 243</span>
<span id="244"> 244</span>
<span id="245"> 245</span>
<span id="246"> 246</span>
<span id="247"> 247</span>
<span id="248"> 248</span>
<span id="249"> 249</span>
<span id="250"> 250</span>
<span id="251"> 251</span>
<span id="252"> 252</span>
<span id="253"> 253</span>
<span id="254"> 254</span>
<span id="255"> 255</span>
<span id="256"> 256</span>
<span id="257"> 257</span>
<span id="258"> 258</span>
<span id="259"> 259</span>
<span id="260"> 260</span>
<span id="261"> 261</span>
<span id="262"> 262</span>
<span id="263"> 263</span>
<span id="264"> 264</span>
<span id="265"> 265</span>
<span id="266"> 266</span>
<span id="267"> 267</span>
<span id="268"> 268</span>
<span id="269"> 269</span>
<span id="270"> 270</span>
<span id="271"> 271</span>
<span id="272"> 272</span>
<span id="273"> 273</span>
<span id="274"> 274</span>
<span id="275"> 275</span>
<span id="276"> 276</span>
<span id="277"> 277</span>
<span id="278"> 278</span>
<span id="279"> 279</span>
<span id="280"> 280</span>
<span id="281"> 281</span>
<span id="282"> 282</span>
<span id="283"> 283</span>
<span id="284"> 284</span>
<span id="285"> 285</span>
<span id="286"> 286</span>
<span id="287"> 287</span>
<span id="288"> 288</span>
<span id="289"> 289</span>
<span id="290"> 290</span>
<span id="291"> 291</span>
<span id="292"> 292</span>
<span id="293"> 293</span>
<span id="294"> 294</span>
<span id="295"> 295</span>
<span id="296"> 296</span>
<span id="297"> 297</span>
<span id="298"> 298</span>
<span id="299"> 299</span>
<span id="300"> 300</span>
<span id="301"> 301</span>
<span id="302"> 302</span>
<span id="303"> 303</span>
<span id="304"> 304</span>
<span id="305"> 305</span>
<span id="306"> 306</span>
<span id="307"> 307</span>
<span id="308"> 308</span>
<span id="309"> 309</span>
<span id="310"> 310</span>
<span id="311"> 311</span>
<span id="312"> 312</span>
<span id="313"> 313</span>
<span id="314"> 314</span>
<span id="315"> 315</span>
<span id="316"> 316</span>
<span id="317"> 317</span>
<span id="318"> 318</span>
<span id="319"> 319</span>
<span id="320"> 320</span>
<span id="321"> 321</span>
<span id="322"> 322</span>
<span id="323"> 323</span>
<span id="324"> 324</span>
<span id="325"> 325</span>
<span id="326"> 326</span>
<span id="327"> 327</span>
<span id="328"> 328</span>
<span id="329"> 329</span>
<span id="330"> 330</span>
<span id="331"> 331</span>
<span id="332"> 332</span>
<span id="333"> 333</span>
<span id="334"> 334</span>
<span id="335"> 335</span>
<span id="336"> 336</span>
<span id="337"> 337</span>
<span id="338"> 338</span>
<span id="339"> 339</span>
<span id="340"> 340</span>
<span id="341"> 341</span>
<span id="342"> 342</span>
<span id="343"> 343</span>
<span id="344"> 344</span>
<span id="345"> 345</span>
<span id="346"> 346</span>
<span id="347"> 347</span>
<span id="348"> 348</span>
<span id="349"> 349</span>
<span id="350"> 350</span>
<span id="351"> 351</span>
<span id="352"> 352</span>
<span id="353"> 353</span>
<span id="354"> 354</span>
<span id="355"> 355</span>
<span id="356"> 356</span>
<span id="357"> 357</span>
<span id="358"> 358</span>
<span id="359"> 359</span>
<span id="360"> 360</span>
<span id="361"> 361</span>
<span id="362"> 362</span>
<span id="363"> 363</span>
<span id="364"> 364</span>
<span id="365"> 365</span>
<span id="366"> 366</span>
<span id="367"> 367</span>
<span id="368"> 368</span>
<span id="369"> 369</span>
<span id="370"> 370</span>
<span id="371"> 371</span>
<span id="372"> 372</span>
<span id="373"> 373</span>
<span id="374"> 374</span>
<span id="375"> 375</span>
<span id="376"> 376</span>
<span id="377"> 377</span>
<span id="378"> 378</span>
<span id="379"> 379</span>
<span id="380"> 380</span>
<span id="381"> 381</span>
<span id="382"> 382</span>
<span id="383"> 383</span>
<span id="384"> 384</span>
<span id="385"> 385</span>
<span id="386"> 386</span>
<span id="387"> 387</span>
<span id="388"> 388</span>
<span id="389"> 389</span>
<span id="390"> 390</span>
<span id="391"> 391</span>
<span id="392"> 392</span>
<span id="393"> 393</span>
<span id="394"> 394</span>
<span id="395"> 395</span>
<span id="396"> 396</span>
<span id="397"> 397</span>
<span id="398"> 398</span>
<span id="399"> 399</span>
<span id="400"> 400</span>
<span id="401"> 401</span>
<span id="402"> 402</span>
<span id="403"> 403</span>
<span id="404"> 404</span>
<span id="405"> 405</span>
<span id="406"> 406</span>
<span id="407"> 407</span>
<span id="408"> 408</span>
<span id="409"> 409</span>
<span id="410"> 410</span>
<span id="411"> 411</span>
<span id="412"> 412</span>
<span id="413"> 413</span>
<span id="414"> 414</span>
<span id="415"> 415</span>
<span id="416"> 416</span>
<span id="417"> 417</span>
<span id="418"> 418</span>
<span id="419"> 419</span>
<span id="420"> 420</span>
<span id="421"> 421</span>
<span id="422"> 422</span>
<span id="423"> 423</span>
<span id="424"> 424</span>
<span id="425"> 425</span>
<span id="426"> 426</span>
<span id="427"> 427</span>
<span id="428"> 428</span>
<span id="429"> 429</span>
<span id="430"> 430</span>
<span id="431"> 431</span>
<span id="432"> 432</span>
<span id="433"> 433</span>
<span id="434"> 434</span>
<span id="435"> 435</span>
<span id="436"> 436</span>
<span id="437"> 437</span>
<span id="438"> 438</span>
<span id="439"> 439</span>
<span id="440"> 440</span>
<span id="441"> 441</span>
<span id="442"> 442</span>
<span id="443"> 443</span>
<span id="444"> 444</span>
<span id="445"> 445</span>
<span id="446"> 446</span>
<span id="447"> 447</span>
<span id="448"> 448</span>
<span id="449"> 449</span>
<span id="450"> 450</span>
<span id="451"> 451</span>
<span id="452"> 452</span>
<span id="453"> 453</span>
<span id="454"> 454</span>
<span id="455"> 455</span>
<span id="456"> 456</span>
<span id="457"> 457</span>
<span id="458"> 458</span>
<span id="459"> 459</span>
<span id="460"> 460</span>
<span id="461"> 461</span>
<span id="462"> 462</span>
<span id="463"> 463</span>
<span id="464"> 464</span>
<span id="465"> 465</span>
<span id="466"> 466</span>
<span id="467"> 467</span>
<span id="468"> 468</span>
<span id="469"> 469</span>
<span id="470"> 470</span>
<span id="471"> 471</span>
<span id="472"> 472</span>
<span id="473"> 473</span>
<span id="474"> 474</span>
<span id="475"> 475</span>
<span id="476"> 476</span>
<span id="477"> 477</span>
<span id="478"> 478</span>
<span id="479"> 479</span>
<span id="480"> 480</span>
<span id="481"> 481</span>
<span id="482"> 482</span>
<span id="483"> 483</span>
<span id="484"> 484</span>
<span id="485"> 485</span>
<span id="486"> 486</span>
<span id="487"> 487</span>
<span id="488"> 488</span>
<span id="489"> 489</span>
<span id="490"> 490</span>
<span id="491"> 491</span>
<span id="492"> 492</span>
<span id="493"> 493</span>
<span id="494"> 494</span>
<span id="495"> 495</span>
<span id="496"> 496</span>
<span id="497"> 497</span>
<span id="498"> 498</span>
<span id="499"> 499</span>
<span id="500"> 500</span>
<span id="501"> 501</span>
<span id="502"> 502</span>
<span id="503"> 503</span>
<span id="504"> 504</span>
<span id="505"> 505</span>
<span id="506"> 506</span>
<span id="507"> 507</span>
<span id="508"> 508</span>
<span id="509"> 509</span>
<span id="510"> 510</span>
<span id="511"> 511</span>
<span id="512"> 512</span>
<span id="513"> 513</span>
<span id="514"> 514</span>
<span id="515"> 515</span>
<span id="516"> 516</span>
<span id="517"> 517</span>
<span id="518"> 518</span>
<span id="519"> 519</span>
<span id="520"> 520</span>
<span id="521"> 521</span>
<span id="522"> 522</span>
<span id="523"> 523</span>
<span id="524"> 524</span>
<span id="525"> 525</span>
<span id="526"> 526</span>
<span id="527"> 527</span>
<span id="528"> 528</span>
<span id="529"> 529</span>
<span id="530"> 530</span>
<span id="531"> 531</span>
<span id="532"> 532</span>
<span id="533"> 533</span>
<span id="534"> 534</span>
<span id="535"> 535</span>
<span id="536"> 536</span>
<span id="537"> 537</span>
<span id="538"> 538</span>
<span id="539"> 539</span>
<span id="540"> 540</span>
<span id="541"> 541</span>
<span id="542"> 542</span>
<span id="543"> 543</span>
<span id="544"> 544</span>
<span id="545"> 545</span>
<span id="546"> 546</span>
<span id="547"> 547</span>
<span id="548"> 548</span>
<span id="549"> 549</span>
<span id="550"> 550</span>
<span id="551"> 551</span>
<span id="552"> 552</span>
<span id="553"> 553</span>
<span id="554"> 554</span>
<span id="555"> 555</span>
<span id="556"> 556</span>
<span id="557"> 557</span>
<span id="558"> 558</span>
<span id="559"> 559</span>
<span id="560"> 560</span>
<span id="561"> 561</span>
<span id="562"> 562</span>
<span id="563"> 563</span>
<span id="564"> 564</span>
<span id="565"> 565</span>
<span id="566"> 566</span>
<span id="567"> 567</span>
<span id="568"> 568</span>
<span id="569"> 569</span>
<span id="570"> 570</span>
<span id="571"> 571</span>
<span id="572"> 572</span>
<span id="573"> 573</span>
<span id="574"> 574</span>
<span id="575"> 575</span>
<span id="576"> 576</span>
<span id="577"> 577</span>
<span id="578"> 578</span>
<span id="579"> 579</span>
<span id="580"> 580</span>
<span id="581"> 581</span>
<span id="582"> 582</span>
<span id="583"> 583</span>
<span id="584"> 584</span>
<span id="585"> 585</span>
<span id="586"> 586</span>
<span id="587"> 587</span>
<span id="588"> 588</span>
<span id="589"> 589</span>
<span id="590"> 590</span>
<span id="591"> 591</span>
<span id="592"> 592</span>
<span id="593"> 593</span>
<span id="594"> 594</span>
<span id="595"> 595</span>
<span id="596"> 596</span>
<span id="597"> 597</span>
<span id="598"> 598</span>
<span id="599"> 599</span>
<span id="600"> 600</span>
<span id="601"> 601</span>
<span id="602"> 602</span>
<span id="603"> 603</span>
<span id="604"> 604</span>
<span id="605"> 605</span>
<span id="606"> 606</span>
<span id="607"> 607</span>
<span id="608"> 608</span>
<span id="609"> 609</span>
<span id="610"> 610</span>
<span id="611"> 611</span>
<span id="612"> 612</span>
<span id="613"> 613</span>
<span id="614"> 614</span>
<span id="615"> 615</span>
<span id="616"> 616</span>
<span id="617"> 617</span>
<span id="618"> 618</span>
<span id="619"> 619</span>
<span id="620"> 620</span>
<span id="621"> 621</span>
<span id="622"> 622</span>
<span id="623"> 623</span>
<span id="624"> 624</span>
<span id="625"> 625</span>
<span id="626"> 626</span>
<span id="627"> 627</span>
<span id="628"> 628</span>
<span id="629"> 629</span>
<span id="630"> 630</span>
<span id="631"> 631</span>
<span id="632"> 632</span>
<span id="633"> 633</span>
<span id="634"> 634</span>
<span id="635"> 635</span>
<span id="636"> 636</span>
<span id="637"> 637</span>
<span id="638"> 638</span>
<span id="639"> 639</span>
<span id="640"> 640</span>
<span id="641"> 641</span>
<span id="642"> 642</span>
<span id="643"> 643</span>
<span id="644"> 644</span>
<span id="645"> 645</span>
<span id="646"> 646</span>
<span id="647"> 647</span>
<span id="648"> 648</span>
<span id="649"> 649</span>
<span id="650"> 650</span>
<span id="651"> 651</span>
<span id="652"> 652</span>
<span id="653"> 653</span>
<span id="654"> 654</span>
<span id="655"> 655</span>
<span id="656"> 656</span>
<span id="657"> 657</span>
<span id="658"> 658</span>
<span id="659"> 659</span>
<span id="660"> 660</span>
<span id="661"> 661</span>
<span id="662"> 662</span>
<span id="663"> 663</span>
<span id="664"> 664</span>
<span id="665"> 665</span>
<span id="666"> 666</span>
<span id="667"> 667</span>
<span id="668"> 668</span>
<span id="669"> 669</span>
<span id="670"> 670</span>
<span id="671"> 671</span>
<span id="672"> 672</span>
<span id="673"> 673</span>
<span id="674"> 674</span>
<span id="675"> 675</span>
<span id="676"> 676</span>
<span id="677"> 677</span>
<span id="678"> 678</span>
<span id="679"> 679</span>
<span id="680"> 680</span>
<span id="681"> 681</span>
<span id="682"> 682</span>
<span id="683"> 683</span>
<span id="684"> 684</span>
<span id="685"> 685</span>
<span id="686"> 686</span>
<span id="687"> 687</span>
<span id="688"> 688</span>
<span id="689"> 689</span>
<span id="690"> 690</span>
<span id="691"> 691</span>
<span id="692"> 692</span>
<span id="693"> 693</span>
<span id="694"> 694</span>
<span id="695"> 695</span>
<span id="696"> 696</span>
<span id="697"> 697</span>
<span id="698"> 698</span>
<span id="699"> 699</span>
<span id="700"> 700</span>
<span id="701"> 701</span>
<span id="702"> 702</span>
<span id="703"> 703</span>
<span id="704"> 704</span>
<span id="705"> 705</span>
<span id="706"> 706</span>
<span id="707"> 707</span>
<span id="708"> 708</span>
<span id="709"> 709</span>
<span id="710"> 710</span>
<span id="711"> 711</span>
<span id="712"> 712</span>
<span id="713"> 713</span>
<span id="714"> 714</span>
<span id="715"> 715</span>
<span id="716"> 716</span>
<span id="717"> 717</span>
<span id="718"> 718</span>
<span id="719"> 719</span>
<span id="720"> 720</span>
<span id="721"> 721</span>
<span id="722"> 722</span>
<span id="723"> 723</span>
<span id="724"> 724</span>
<span id="725"> 725</span>
<span id="726"> 726</span>
<span id="727"> 727</span>
<span id="728"> 728</span>
<span id="729"> 729</span>
<span id="730"> 730</span>
<span id="731"> 731</span>
<span id="732"> 732</span>
<span id="733"> 733</span>
<span id="734"> 734</span>
<span id="735"> 735</span>
<span id="736"> 736</span>
<span id="737"> 737</span>
<span id="738"> 738</span>
<span id="739"> 739</span>
<span id="740"> 740</span>
<span id="741"> 741</span>
<span id="742"> 742</span>
<span id="743"> 743</span>
<span id="744"> 744</span>
<span id="745"> 745</span>
<span id="746"> 746</span>
<span id="747"> 747</span>
<span id="748"> 748</span>
<span id="749"> 749</span>
<span id="750"> 750</span>
<span id="751"> 751</span>
<span id="752"> 752</span>
<span id="753"> 753</span>
<span id="754"> 754</span>
<span id="755"> 755</span>
<span id="756"> 756</span>
<span id="757"> 757</span>
<span id="758"> 758</span>
<span id="759"> 759</span>
<span id="760"> 760</span>
<span id="761"> 761</span>
<span id="762"> 762</span>
<span id="763"> 763</span>
<span id="764"> 764</span>
<span id="765"> 765</span>
<span id="766"> 766</span>
<span id="767"> 767</span>
<span id="768"> 768</span>
<span id="769"> 769</span>
<span id="770"> 770</span>
<span id="771"> 771</span>
<span id="772"> 772</span>
<span id="773"> 773</span>
<span id="774"> 774</span>
<span id="775"> 775</span>
<span id="776"> 776</span>
<span id="777"> 777</span>
<span id="778"> 778</span>
<span id="779"> 779</span>
<span id="780"> 780</span>
<span id="781"> 781</span>
<span id="782"> 782</span>
<span id="783"> 783</span>
<span id="784"> 784</span>
<span id="785"> 785</span>
<span id="786"> 786</span>
<span id="787"> 787</span>
<span id="788"> 788</span>
<span id="789"> 789</span>
<span id="790"> 790</span>
<span id="791"> 791</span>
<span id="792"> 792</span>
<span id="793"> 793</span>
<span id="794"> 794</span>
<span id="795"> 795</span>
<span id="796"> 796</span>
<span id="797"> 797</span>
<span id="798"> 798</span>
<span id="799"> 799</span>
<span id="800"> 800</span>
<span id="801"> 801</span>
<span id="802"> 802</span>
<span id="803"> 803</span>
<span id="804"> 804</span>
<span id="805"> 805</span>
<span id="806"> 806</span>
<span id="807"> 807</span>
<span id="808"> 808</span>
<span id="809"> 809</span>
<span id="810"> 810</span>
<span id="811"> 811</span>
<span id="812"> 812</span>
<span id="813"> 813</span>
<span id="814"> 814</span>
<span id="815"> 815</span>
<span id="816"> 816</span>
<span id="817"> 817</span>
<span id="818"> 818</span>
<span id="819"> 819</span>
<span id="820"> 820</span>
<span id="821"> 821</span>
<span id="822"> 822</span>
<span id="823"> 823</span>
<span id="824"> 824</span>
<span id="825"> 825</span>
<span id="826"> 826</span>
<span id="827"> 827</span>
<span id="828"> 828</span>
<span id="829"> 829</span>
<span id="830"> 830</span>
<span id="831"> 831</span>
<span id="832"> 832</span>
<span id="833"> 833</span>
<span id="834"> 834</span>
<span id="835"> 835</span>
<span id="836"> 836</span>
<span id="837"> 837</span>
<span id="838"> 838</span>
<span id="839"> 839</span>
<span id="840"> 840</span>
<span id="841"> 841</span>
<span id="842"> 842</span>
<span id="843"> 843</span>
<span id="844"> 844</span>
<span id="845"> 845</span>
<span id="846"> 846</span>
<span id="847"> 847</span>
<span id="848"> 848</span>
<span id="849"> 849</span>
<span id="850"> 850</span>
<span id="851"> 851</span>
<span id="852"> 852</span>
<span id="853"> 853</span>
<span id="854"> 854</span>
<span id="855"> 855</span>
<span id="856"> 856</span>
<span id="857"> 857</span>
<span id="858"> 858</span>
<span id="859"> 859</span>
<span id="860"> 860</span>
<span id="861"> 861</span>
<span id="862"> 862</span>
<span id="863"> 863</span>
<span id="864"> 864</span>
<span id="865"> 865</span>
<span id="866"> 866</span>
<span id="867"> 867</span>
<span id="868"> 868</span>
<span id="869"> 869</span>
<span id="870"> 870</span>
<span id="871"> 871</span>
<span id="872"> 872</span>
<span id="873"> 873</span>
<span id="874"> 874</span>
<span id="875"> 875</span>
<span id="876"> 876</span>
<span id="877"> 877</span>
<span id="878"> 878</span>
<span id="879"> 879</span>
<span id="880"> 880</span>
<span id="881"> 881</span>
<span id="882"> 882</span>
<span id="883"> 883</span>
<span id="884"> 884</span>
<span id="885"> 885</span>
<span id="886"> 886</span>
<span id="887"> 887</span>
<span id="888"> 888</span>
<span id="889"> 889</span>
<span id="890"> 890</span>
<span id="891"> 891</span>
<span id="892"> 892</span>
<span id="893"> 893</span>
<span id="894"> 894</span>
<span id="895"> 895</span>
<span id="896"> 896</span>
<span id="897"> 897</span>
<span id="898"> 898</span>
<span id="899"> 899</span>
<span id="900"> 900</span>
<span id="901"> 901</span>
<span id="902"> 902</span>
<span id="903"> 903</span>
<span id="904"> 904</span>
<span id="905"> 905</span>
<span id="906"> 906</span>
<span id="907"> 907</span>
<span id="908"> 908</span>
<span id="909"> 909</span>
<span id="910"> 910</span>
<span id="911"> 911</span>
<span id="912"> 912</span>
<span id="913"> 913</span>
<span id="914"> 914</span>
<span id="915"> 915</span>
<span id="916"> 916</span>
<span id="917"> 917</span>
<span id="918"> 918</span>
<span id="919"> 919</span>
<span id="920"> 920</span>
<span id="921"> 921</span>
<span id="922"> 922</span>
<span id="923"> 923</span>
<span id="924"> 924</span>
<span id="925"> 925</span>
<span id="926"> 926</span>
<span id="927"> 927</span>
<span id="928"> 928</span>
<span id="929"> 929</span>
<span id="930"> 930</span>
<span id="931"> 931</span>
<span id="932"> 932</span>
<span id="933"> 933</span>
<span id="934"> 934</span>
<span id="935"> 935</span>
<span id="936"> 936</span>
<span id="937"> 937</span>
<span id="938"> 938</span>
<span id="939"> 939</span>
<span id="940"> 940</span>
<span id="941"> 941</span>
<span id="942"> 942</span>
<span id="943"> 943</span>
<span id="944"> 944</span>
<span id="945"> 945</span>
<span id="946"> 946</span>
<span id="947"> 947</span>
<span id="948"> 948</span>
<span id="949"> 949</span>
<span id="950"> 950</span>
<span id="951"> 951</span>
<span id="952"> 952</span>
<span id="953"> 953</span>
<span id="954"> 954</span>
<span id="955"> 955</span>
<span id="956"> 956</span>
<span id="957"> 957</span>
<span id="958"> 958</span>
<span id="959"> 959</span>
<span id="960"> 960</span>
<span id="961"> 961</span>
<span id="962"> 962</span>
<span id="963"> 963</span>
<span id="964"> 964</span>
<span id="965"> 965</span>
<span id="966"> 966</span>
<span id="967"> 967</span>
<span id="968"> 968</span>
<span id="969"> 969</span>
<span id="970"> 970</span>
<span id="971"> 971</span>
<span id="972"> 972</span>
<span id="973"> 973</span>
<span id="974"> 974</span>
<span id="975"> 975</span>
<span id="976"> 976</span>
<span id="977"> 977</span>
<span id="978"> 978</span>
<span id="979"> 979</span>
<span id="980"> 980</span>
<span id="981"> 981</span>
<span id="982"> 982</span>
<span id="983"> 983</span>
<span id="984"> 984</span>
<span id="985"> 985</span>
<span id="986"> 986</span>
<span id="987"> 987</span>
<span id="988"> 988</span>
<span id="989"> 989</span>
<span id="990"> 990</span>
<span id="991"> 991</span>
<span id="992"> 992</span>
<span id="993"> 993</span>
<span id="994"> 994</span>
<span id="995"> 995</span>
<span id="996"> 996</span>
<span id="997"> 997</span>
<span id="998"> 998</span>
<span id="999"> 999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
<span id="1160">1160</span>
<span id="1161">1161</span>
<span id="1162">1162</span>
<span id="1163">1163</span>
<span id="1164">1164</span>
<span id="1165">1165</span>
<span id="1166">1166</span>
<span id="1167">1167</span>
<span id="1168">1168</span>
<span id="1169">1169</span>
<span id="1170">1170</span>
<span id="1171">1171</span>
<span id="1172">1172</span>
<span id="1173">1173</span>
<span id="1174">1174</span>
<span id="1175">1175</span>
<span id="1176">1176</span>
<span id="1177">1177</span>
<span id="1178">1178</span>
<span id="1179">1179</span>
<span id="1180">1180</span>
<span id="1181">1181</span>
<span id="1182">1182</span>
<span id="1183">1183</span>
<span id="1184">1184</span>
<span id="1185">1185</span>
<span id="1186">1186</span>
<span id="1187">1187</span>
<span id="1188">1188</span>
<span id="1189">1189</span>
<span id="1190">1190</span>
<span id="1191">1191</span>
<span id="1192">1192</span>
<span id="1193">1193</span>
<span id="1194">1194</span>
<span id="1195">1195</span>
<span id="1196">1196</span>
<span id="1197">1197</span>
<span id="1198">1198</span>
<span id="1199">1199</span>
<span id="1200">1200</span>
<span id="1201">1201</span>
<span id="1202">1202</span>
<span id="1203">1203</span>
<span id="1204">1204</span>
<span id="1205">1205</span>
<span id="1206">1206</span>
<span id="1207">1207</span>
<span id="1208">1208</span>
<span id="1209">1209</span>
<span id="1210">1210</span>
<span id="1211">1211</span>
<span id="1212">1212</span>
<span id="1213">1213</span>
<span id="1214">1214</span>
<span id="1215">1215</span>
<span id="1216">1216</span>
<span id="1217">1217</span>
<span id="1218">1218</span>
<span id="1219">1219</span>
<span id="1220">1220</span>
<span id="1221">1221</span>
<span id="1222">1222</span>
<span id="1223">1223</span>
<span id="1224">1224</span>
<span id="1225">1225</span>
<span id="1226">1226</span>
<span id="1227">1227</span>
<span id="1228">1228</span>
<span id="1229">1229</span>
<span id="1230">1230</span>
<span id="1231">1231</span>
<span id="1232">1232</span>
<span id="1233">1233</span>
<span id="1234">1234</span>
<span id="1235">1235</span>
<span id="1236">1236</span>
<span id="1237">1237</span>
<span id="1238">1238</span>
<span id="1239">1239</span>
<span id="1240">1240</span>
<span id="1241">1241</span>
<span id="1242">1242</span>
<span id="1243">1243</span>
<span id="1244">1244</span>
<span id="1245">1245</span>
<span id="1246">1246</span>
<span id="1247">1247</span>
<span id="1248">1248</span>
<span id="1249">1249</span>
<span id="1250">1250</span>
<span id="1251">1251</span>
<span id="1252">1252</span>
<span id="1253">1253</span>
<span id="1254">1254</span>
<span id="1255">1255</span>
<span id="1256">1256</span>
<span id="1257">1257</span>
<span id="1258">1258</span>
<span id="1259">1259</span>
<span id="1260">1260</span>
<span id="1261">1261</span>
<span id="1262">1262</span>
<span id="1263">1263</span>
<span id="1264">1264</span>
<span id="1265">1265</span>
<span id="1266">1266</span>
<span id="1267">1267</span>
<span id="1268">1268</span>
<span id="1269">1269</span>
<span id="1270">1270</span>
<span id="1271">1271</span>
<span id="1272">1272</span>
<span id="1273">1273</span>
<span id="1274">1274</span>
<span id="1275">1275</span>
<span id="1276">1276</span>
<span id="1277">1277</span>
<span id="1278">1278</span>
<span id="1279">1279</span>
<span id="1280">1280</span>
<span id="1281">1281</span>
<span id="1282">1282</span>
<span id="1283">1283</span>
<span id="1284">1284</span>
<span id="1285">1285</span>
<span id="1286">1286</span>
<span id="1287">1287</span>
<span id="1288">1288</span>
<span id="1289">1289</span>
<span id="1290">1290</span>
<span id="1291">1291</span>
<span id="1292">1292</span>
<span id="1293">1293</span>
<span id="1294">1294</span>
<span id="1295">1295</span>
<span id="1296">1296</span>
<span id="1297">1297</span>
<span id="1298">1298</span>
<span id="1299">1299</span>
<span id="1300">1300</span>
<span id="1301">1301</span>
<span id="1302">1302</span>
<span id="1303">1303</span>
<span id="1304">1304</span>
<span id="1305">1305</span>
<span id="1306">1306</span>
<span id="1307">1307</span>
<span id="1308">1308</span>
<span id="1309">1309</span>
<span id="1310">1310</span>
<span id="1311">1311</span>
<span id="1312">1312</span>
<span id="1313">1313</span>
<span id="1314">1314</span>
<span id="1315">1315</span>
<span id="1316">1316</span>
<span id="1317">1317</span>
<span id="1318">1318</span>
<span id="1319">1319</span>
<span id="1320">1320</span>
<span id="1321">1321</span>
<span id="1322">1322</span>
<span id="1323">1323</span>
<span id="1324">1324</span>
<span id="1325">1325</span>
<span id="1326">1326</span>
<span id="1327">1327</span>
<span id="1328">1328</span>
<span id="1329">1329</span>
<span id="1330">1330</span>
<span id="1331">1331</span>
<span id="1332">1332</span>
<span id="1333">1333</span>
<span id="1334">1334</span>
<span id="1335">1335</span>
<span id="1336">1336</span>
<span id="1337">1337</span>
<span id="1338">1338</span>
<span id="1339">1339</span>
<span id="1340">1340</span>
<span id="1341">1341</span>
<span id="1342">1342</span>
<span id="1343">1343</span>
<span id="1344">1344</span>
<span id="1345">1345</span>
<span id="1346">1346</span>
<span id="1347">1347</span>
<span id="1348">1348</span>
<span id="1349">1349</span>
<span id="1350">1350</span>
<span id="1351">1351</span>
<span id="1352">1352</span>
<span id="1353">1353</span>
<span id="1354">1354</span>
<span id="1355">1355</span>
<span id="1356">1356</span>
<span id="1357">1357</span>
<span id="1358">1358</span>
<span id="1359">1359</span>
<span id="1360">1360</span>
<span id="1361">1361</span>
<span id="1362">1362</span>
<span id="1363">1363</span>
<span id="1364">1364</span>
<span id="1365">1365</span>
<span id="1366">1366</span>
<span id="1367">1367</span>
<span id="1368">1368</span>
<span id="1369">1369</span>
<span id="1370">1370</span>
<span id="1371">1371</span>
<span id="1372">1372</span>
<span id="1373">1373</span>
<span id="1374">1374</span>
<span id="1375">1375</span>
<span id="1376">1376</span>
<span id="1377">1377</span>
<span id="1378">1378</span>
<span id="1379">1379</span>
<span id="1380">1380</span>
<span id="1381">1381</span>
<span id="1382">1382</span>
<span id="1383">1383</span>
<span id="1384">1384</span>
<span id="1385">1385</span>
<span id="1386">1386</span>
<span id="1387">1387</span>
<span id="1388">1388</span>
<span id="1389">1389</span>
<span id="1390">1390</span>
<span id="1391">1391</span>
<span id="1392">1392</span>
<span id="1393">1393</span>
<span id="1394">1394</span>
<span id="1395">1395</span>
<span id="1396">1396</span>
<span id="1397">1397</span>
<span id="1398">1398</span>
<span id="1399">1399</span>
<span id="1400">1400</span>
<span id="1401">1401</span>
<span id="1402">1402</span>
<span id="1403">1403</span>
<span id="1404">1404</span>
<span id="1405">1405</span>
<span id="1406">1406</span>
<span id="1407">1407</span>
<span id="1408">1408</span>
<span id="1409">1409</span>
<span id="1410">1410</span>
<span id="1411">1411</span>
<span id="1412">1412</span>
<span id="1413">1413</span>
<span id="1414">1414</span>
<span id="1415">1415</span>
<span id="1416">1416</span>
<span id="1417">1417</span>
<span id="1418">1418</span>
<span id="1419">1419</span>
<span id="1420">1420</span>
<span id="1421">1421</span>
<span id="1422">1422</span>
<span id="1423">1423</span>
<span id="1424">1424</span>
<span id="1425">1425</span>
<span id="1426">1426</span>
<span id="1427">1427</span>
<span id="1428">1428</span>
<span id="1429">1429</span>
<span id="1430">1430</span>
<span id="1431">1431</span>
<span id="1432">1432</span>
<span id="1433">1433</span>
<span id="1434">1434</span>
<span id="1435">1435</span>
<span id="1436">1436</span>
<span id="1437">1437</span>
<span id="1438">1438</span>
<span id="1439">1439</span>
<span id="1440">1440</span>
<span id="1441">1441</span>
<span id="1442">1442</span>
<span id="1443">1443</span>
<span id="1444">1444</span>
<span id="1445">1445</span>
<span id="1446">1446</span>
<span id="1447">1447</span>
<span id="1448">1448</span>
<span id="1449">1449</span>
<span id="1450">1450</span>
<span id="1451">1451</span>
<span id="1452">1452</span>
<span id="1453">1453</span>
<span id="1454">1454</span>
<span id="1455">1455</span>
<span id="1456">1456</span>
<span id="1457">1457</span>
<span id="1458">1458</span>
<span id="1459">1459</span>
<span id="1460">1460</span>
<span id="1461">1461</span>
<span id="1462">1462</span>
<span id="1463">1463</span>
<span id="1464">1464</span>
<span id="1465">1465</span>
<span id="1466">1466</span>
<span id="1467">1467</span>
<span id="1468">1468</span>
<span id="1469">1469</span>
<span id="1470">1470</span>
<span id="1471">1471</span>
<span id="1472">1472</span>
<span id="1473">1473</span>
<span id="1474">1474</span>
<span id="1475">1475</span>
<span id="1476">1476</span>
<span id="1477">1477</span>
<span id="1478">1478</span>
<span id="1479">1479</span>
<span id="1480">1480</span>
<span id="1481">1481</span>
<span id="1482">1482</span>
<span id="1483">1483</span>
<span id="1484">1484</span>
<span id="1485">1485</span>
<span id="1486">1486</span>
<span id="1487">1487</span>
<span id="1488">1488</span>
<span id="1489">1489</span>
<span id="1490">1490</span>
<span id="1491">1491</span>
<span id="1492">1492</span>
<span id="1493">1493</span>
<span id="1494">1494</span>
<span id="1495">1495</span>
<span id="1496">1496</span>
<span id="1497">1497</span>
<span id="1498">1498</span>
<span id="1499">1499</span>
<span id="1500">1500</span>
<span id="1501">1501</span>
<span id="1502">1502</span>
<span id="1503">1503</span>
<span id="1504">1504</span>
<span id="1505">1505</span>
<span id="1506">1506</span>
<span id="1507">1507</span>
<span id="1508">1508</span>
<span id="1509">1509</span>
<span id="1510">1510</span>
<span id="1511">1511</span>
<span id="1512">1512</span>
<span id="1513">1513</span>
<span id="1514">1514</span>
<span id="1515">1515</span>
</pre><div class="example-wrap"><pre class="rust ">
<span class="doccomment">//! Load commands tell the kernel and dynamic linker anything from how to load this binary into memory, what the entry point is, apple specific information, to which libraries it requires for dynamic linking</span>

<span class="kw">use</span> <span class="kw">crate</span>::<span class="ident">error</span>;
<span class="kw">use</span> <span class="ident">core</span>::<span class="ident">fmt</span>::{<span class="self">self</span>, <span class="ident">Display</span>};
<span class="kw">use</span> <span class="ident">scroll</span>::{<span class="ident">ctx</span>, <span class="ident">Endian</span>};
<span class="kw">use</span> <span class="ident">scroll</span>::{<span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>};

<span class="comment">///////////////////////////////////////</span>
<span class="comment">// Load Commands from mach-o/loader.h</span>
<span class="comment">// with some rusty additions</span>
<span class="comment">//////////////////////////////////////</span>

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="doccomment">/// Occurs at the beginning of every load command to serve as a sort of tagged union/enum discriminant</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">LoadCommandHeader</span> {
  <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
  <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
}

<span class="kw">impl</span> <span class="ident">Display</span> <span class="kw">for</span> <span class="ident">LoadCommandHeader</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">fmt</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">fmt</span>::<span class="prelude-ty">Result</span> {
        <span class="macro">write</span><span class="macro">!</span>(<span class="ident">fmt</span>, <span class="string">&quot;LoadCommandHeader: {} size: {}&quot;</span>, <span class="ident">cmd_to_str</span>(<span class="self">self</span>.<span class="ident">cmd</span>), <span class="self">self</span>.<span class="ident">cmdsize</span>)
    }
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_LOAD_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">8</span>;

<span class="kw">pub</span> <span class="kw">type</span> <span class="ident">LcStr</span> <span class="op">=</span> <span class="ident">u32</span>;

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_LC_STR</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">4</span>;

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Section32</span> {
    <span class="doccomment">/// name of this section</span>
    <span class="kw">pub</span> <span class="ident">sectname</span>:  [<span class="ident">u8</span>; <span class="number">16</span>],
    <span class="doccomment">/// segment this section goes in</span>
    <span class="kw">pub</span> <span class="ident">segname</span>:   [<span class="ident">u8</span>; <span class="number">16</span>],
    <span class="doccomment">/// memory address of this section</span>
    <span class="kw">pub</span> <span class="ident">addr</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// size in bytes of this section</span>
    <span class="kw">pub</span> <span class="ident">size</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// file offset of this section</span>
    <span class="kw">pub</span> <span class="ident">offset</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// section alignment (power of 2)</span>
    <span class="kw">pub</span> <span class="ident">align</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// file offset of relocation entries</span>
    <span class="kw">pub</span> <span class="ident">reloff</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// number of relocation entries</span>
    <span class="kw">pub</span> <span class="ident">nreloc</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// flags (section type and attributes)</span>
    <span class="kw">pub</span> <span class="ident">flags</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// reserved (for offset or index)</span>
    <span class="kw">pub</span> <span class="ident">reserved1</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// reserved (for count or sizeof)</span>
    <span class="kw">pub</span> <span class="ident">reserved2</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SECTION_32</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">68</span>;

<span class="doccomment">/// for 64-bit architectures</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Section64</span> {
    <span class="doccomment">/// name of this section</span>
    <span class="kw">pub</span> <span class="ident">sectname</span>:  [<span class="ident">u8</span>; <span class="number">16</span>],
    <span class="doccomment">/// segment this section goes in</span>
    <span class="kw">pub</span> <span class="ident">segname</span>:   [<span class="ident">u8</span>; <span class="number">16</span>],
    <span class="doccomment">/// memory address of this section</span>
    <span class="kw">pub</span> <span class="ident">addr</span>:      <span class="ident">u64</span>,
    <span class="doccomment">/// size in bytes of this section</span>
    <span class="kw">pub</span> <span class="ident">size</span>:      <span class="ident">u64</span>,
    <span class="doccomment">/// file offset of this section</span>
    <span class="kw">pub</span> <span class="ident">offset</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// section alignment (power of 2)</span>
    <span class="kw">pub</span> <span class="ident">align</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// file offset of relocation entries</span>
    <span class="kw">pub</span> <span class="ident">reloff</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// number of relocation entries</span>
    <span class="kw">pub</span> <span class="ident">nreloc</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// flags (section type and attributes</span>
    <span class="kw">pub</span> <span class="ident">flags</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// reserved (for offset or index)</span>
    <span class="kw">pub</span> <span class="ident">reserved1</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// reserved (for count or sizeof)</span>
    <span class="kw">pub</span> <span class="ident">reserved2</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// reserved</span>
    <span class="kw">pub</span> <span class="ident">reserved3</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SECTION_64</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">80</span>;

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SegmentCommand32</span> {
    <span class="kw">pub</span> <span class="ident">cmd</span>:      <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>:  <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">segname</span>:  [<span class="ident">u8</span>; <span class="number">16</span>],
    <span class="kw">pub</span> <span class="ident">vmaddr</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">vmsize</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">fileoff</span>:  <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">filesize</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">maxprot</span>:  <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">initprot</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">nsects</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">flags</span>:    <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SEGMENT_COMMAND_32</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">56</span>;

<span class="kw">impl</span> <span class="ident">SegmentCommand32</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">name</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">error</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">str</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="self">self</span>.<span class="ident">segname</span>.<span class="ident">pread</span>::<span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">str</span><span class="op">&gt;</span>(<span class="number">0</span>)<span class="question-mark">?</span>)
    }
}

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SegmentCommand64</span> {
    <span class="kw">pub</span> <span class="ident">cmd</span>:      <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>:  <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">segname</span>:  [<span class="ident">u8</span>; <span class="number">16</span>],
    <span class="kw">pub</span> <span class="ident">vmaddr</span>:   <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">vmsize</span>:   <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">fileoff</span>:  <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">filesize</span>: <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">maxprot</span>:  <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">initprot</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">nsects</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">flags</span>:    <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SEGMENT_COMMAND_64</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">72</span>;

<span class="kw">impl</span> <span class="ident">SegmentCommand64</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">name</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">error</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">str</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="self">self</span>.<span class="ident">segname</span>.<span class="ident">pread</span>::<span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">str</span><span class="op">&gt;</span>(<span class="number">0</span>)<span class="question-mark">?</span>)
    }
}
<span class="doccomment">/// Fixed virtual memory shared libraries are identified by two things.  The</span>
<span class="doccomment">/// target pathname (the name of the library as found for execution), and the</span>
<span class="doccomment">/// minor version number.  The address of where the headers are loaded is in</span>
<span class="doccomment">/// header_addr. (THIS IS OBSOLETE and no longer supported).</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Fvmlib</span> {
    <span class="doccomment">/// library&#39;s target pathname</span>
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// library&#39;s minor version number</span>
    <span class="kw">pub</span> <span class="ident">minor_version</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// library&#39;s header address</span>
    <span class="kw">pub</span> <span class="ident">header_addr</span>:   <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_FVMLIB</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// A fixed virtual shared library (fipub constype == MH_FVMLIB in the mach header)</span>
<span class="doccomment">/// contains a fvmlib_command (cmd == LC_IDFVMLIB) to identify the library.</span>
<span class="doccomment">/// An object that uses a fixed virtual shared library also contains a</span>
<span class="doccomment">/// fvmlib_command (cmd == LC_LOADFVMLIB) for each library it uses.</span>
<span class="doccomment">/// (THIS IS OBSOLETE and no longer supported).</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">FvmlibCommand</span> {
    <span class="doccomment">/// LC_IDFVMLIB or LC_LOADFVMLIB</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// includes pathname string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the library identification</span>
    <span class="kw">pub</span> <span class="ident">fvmlib</span>: <span class="ident">Fvmlib</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_FVMLIB_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">20</span>;

<span class="comment">// /// Dynamicly linked shared libraries are identified by two things.  The</span>
<span class="comment">// /// pathname (the name of the library as found for execution), and the</span>
<span class="comment">// /// compatibility version number.  The pathname must match and the compatibility</span>
<span class="comment">// /// number in the user of the library must be greater than or equal to the</span>
<span class="comment">// /// library being used.  The time stamp is used to record the time a library was</span>
<span class="comment">// /// built and copied into user so it can be use to determined if the library used</span>
<span class="comment">// /// at runtime is exactly the same as used to built the program.</span>
<span class="comment">// struct dylib {</span>
<span class="comment">//     union lc_str  name;   // library&#39;s path name</span>
<span class="comment">//     uint32_t timestamp;   // library&#39;s build time stamp</span>
<span class="comment">//     uint32_t current_version;  // library&#39;s current version number</span>
<span class="comment">//     uint32_t compatibility_version; // library&#39;s compatibility vers number</span>
<span class="comment">// }</span>

<span class="doccomment">/// A dynamically linked shared library (fipub constype == MH_DYLIB in the mach header)</span>
<span class="doccomment">/// contains a dylib_command (cmd == LC_ID_DYLIB) to identify the library.</span>
<span class="doccomment">/// An object that uses a dynamically linked shared library also contains a</span>
<span class="doccomment">/// dylib_command (cmd == LC_LOAD_DYLIB, LC_LOAD_WEAK_DYLIB, or</span>
<span class="doccomment">/// LC_REEXPORT_DYLIB) for each library it uses.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Dylib</span> {
    <span class="doccomment">/// library&#39;s path name</span>
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">LcStr</span>,
    <span class="doccomment">/// library&#39;s build time stamp</span>
    <span class="kw">pub</span> <span class="ident">timestamp</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// library&#39;s current version number</span>
    <span class="kw">pub</span> <span class="ident">current_version</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// library&#39;s compatibility vers number</span>
    <span class="kw">pub</span> <span class="ident">compatibility_version</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_DYLIB</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">16</span>;

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DylibCommand</span> {
    <span class="doccomment">/// LC_ID_DYLIB, LC_LOAD_DYLIB, LC_LOAD_WEAK_DYLIB, LC_REEXPORT_DYLIB</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// includes pathname string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the library identification</span>
    <span class="kw">pub</span> <span class="ident">dylib</span>: <span class="ident">Dylib</span>,
  }

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_DYLIB_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">20</span>;

<span class="doccomment">/// A dynamically linked shared library may be a subframework of an umbrella</span>
<span class="doccomment">/// framework.  If so it will be linked with &quot;-umbrella umbrella_name&quot; where</span>
<span class="doccomment">/// Where &quot;umbrella_name&quot; is the name of the umbrella framework. A subframework</span>
<span class="doccomment">/// can only be linked against by its umbrella framework or other subframeworks</span>
<span class="doccomment">/// that are part of the same umbrella framework.  Otherwise the static link</span>
<span class="doccomment">/// editor produces an error and states to link against the umbrella framework.</span>
<span class="doccomment">/// The name of the umbrella framework for subframeworks is recorded in the</span>
<span class="doccomment">/// following structure.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SubFrameworkCommand</span> {
    <span class="doccomment">/// LC_SUB_FRAMEWORK</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// includes umbrella string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the umbrella framework name</span>
    <span class="kw">pub</span> <span class="ident">umbrella</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SUB_FRAMEWORK_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// For dynamically linked shared libraries that are subframework of an umbrella</span>
<span class="doccomment">/// framework they can allow clients other than the umbrella framework or other</span>
<span class="doccomment">/// subframeworks in the same umbrella framework.  To do this the subframework</span>
<span class="doccomment">/// is built with &quot;-allowable_client client_name&quot; and an LC_SUB_CLIENT load</span>
<span class="doccomment">/// command is created for each -allowable_client flag.  The client_name is</span>
<span class="doccomment">/// usually a framework name.  It can also be a name used for bundles clients</span>
<span class="doccomment">/// where the bundle is built with &quot;-client_name client_name&quot;.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SubClientCommand</span> {
    <span class="doccomment">/// LC_SUB_CLIENT</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// includes client string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the client name</span>
    <span class="kw">pub</span> <span class="ident">client</span>: <span class="ident">LcStr</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SUB_CLIENT_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// A dynamically linked shared library may be a sub_umbrella of an umbrella</span>
<span class="doccomment">/// framework.  If so it will be linked with &quot;-sub_umbrella umbrella_name&quot; where</span>
<span class="doccomment">/// Where &quot;umbrella_name&quot; is the name of the sub_umbrella framework.  When</span>
<span class="doccomment">/// staticly linking when -twolevel_namespace is in effect a twolevel namespace</span>
<span class="doccomment">/// umbrella framework will only cause its subframeworks and those frameworks</span>
<span class="doccomment">/// listed as sub_umbrella frameworks to be implicited linked in.  Any other</span>
<span class="doccomment">/// dependent dynamic libraries will not be linked it when -twolevel_namespace</span>
<span class="doccomment">/// is in effect.  The primary library recorded by the static linker when</span>
<span class="doccomment">/// resolving a symbol in these libraries will be the umbrella framework.</span>
<span class="doccomment">/// Zero or more sub_umbrella frameworks may be use by an umbrella framework.</span>
<span class="doccomment">/// The name of a sub_umbrella framework is recorded in the following structure.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SubUmbrellaCommand</span> {
    <span class="doccomment">/// LC_SUB_UMBRELLA</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// includes sub_umbrella string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the sub_umbrella framework name</span>
    <span class="kw">pub</span> <span class="ident">sub_umbrella</span>: <span class="ident">LcStr</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SUB_UMBRELLA_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// A dynamically linked shared library may be a sub_library of another shared</span>
<span class="doccomment">/// library.  If so it will be linked with &quot;-sub_library library_name&quot; where</span>
<span class="doccomment">/// Where &quot;library_name&quot; is the name of the sub_library shared library.  When</span>
<span class="doccomment">/// staticly linking when -twolevel_namespace is in effect a twolevel namespace</span>
<span class="doccomment">/// shared library will only cause its subframeworks and those frameworks</span>
<span class="doccomment">/// listed as sub_umbrella frameworks and libraries listed as sub_libraries to</span>
<span class="doccomment">/// be implicited linked in.  Any other dependent dynamic libraries will not be</span>
<span class="doccomment">/// linked it when -twolevel_namespace is in effect.  The primary library</span>
<span class="doccomment">/// recorded by the static linker when resolving a symbol in these libraries</span>
<span class="doccomment">/// will be the umbrella framework (or dynamic library). Zero or more sub_library</span>
<span class="doccomment">/// shared libraries may be use by an umbrella framework or (or dynamic library).</span>
<span class="doccomment">/// The name of a sub_library framework is recorded in the following structure.</span>
<span class="doccomment">/// For example /usr/lib/libobjc_profile.A.dylib would be recorded as &quot;libobjc&quot;.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SubLibraryCommand</span> {
    <span class="doccomment">/// LC_SUB_LIBRARY</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// includes sub_library string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the sub_library name</span>
    <span class="kw">pub</span> <span class="ident">sub_library</span>: <span class="ident">LcStr</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SUB_LIBRARY_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// A program (type == MH_EXECUTE) that is</span>
<span class="doccomment">/// prebound to its dynamic libraries has one of these for each library that</span>
<span class="doccomment">/// the static linker used in prebinding.  It contains a bit vector for the</span>
<span class="doccomment">/// modules in the library.  The bits indicate which modules are bound (1) and</span>
<span class="doccomment">/// which are not (0) from the library.  The bit for module 0 is the low bit</span>
<span class="doccomment">/// of the first byte.  So the bit for the Nth module is:</span>
<span class="doccomment">/// (linked_modules[N/8] &gt;&gt; N%8) &amp; 1</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">PreboundDylibCommand</span> {
    <span class="doccomment">/// LC_PREBOUND_DYLIB</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// includes strings</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// library&#39;s path name</span>
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">LcStr</span>,
    <span class="doccomment">/// number of modules in library</span>
    <span class="kw">pub</span> <span class="ident">nmodules</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// bit vector of linked modules</span>
    <span class="comment">// TODO: fixme</span>
    <span class="kw">pub</span> <span class="ident">linked_modules</span>: <span class="ident">LcStr</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_PREBOUND_DYLIB_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">20</span>;

<span class="doccomment">/// The name of the dynamic linker</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DylinkerCommand</span> {
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">name</span>:    <span class="ident">LcStr</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_DYLINKER_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// Thread commands contain machine-specific data structures suitable for</span>
<span class="doccomment">/// use in the thread state primitives.  The machine specific data structures</span>
<span class="doccomment">/// follow the struct thread_command as follows.</span>
<span class="doccomment">/// Each flavor of machine specific data structure is preceded by an unsigned</span>
<span class="doccomment">/// long constant for the flavor of that data structure, an uint32_t</span>
<span class="doccomment">/// that is the count of longs of the size of the state data structure and then</span>
<span class="doccomment">/// the state data structure follows.  This triple may be repeated for many</span>
<span class="doccomment">/// flavors.  The constants for the flavors, counts and state data structure</span>
<span class="doccomment">/// definitions are expected to be in the header file &lt;machine/thread_status.h&gt;.</span>
<span class="doccomment">/// These machine specific data structures sizes must be multiples of</span>
<span class="doccomment">/// 4 bytes  The cmdsize reflects the total size of the thread_command</span>
<span class="doccomment">/// and all of the sizes of the constants for the flavors, counts and state</span>
<span class="doccomment">/// data structures.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// For executable objects that are unix processes there will be one</span>
<span class="doccomment">/// thread_command (cmd == LC_UNIXTHREAD) created for it by the link-editor.</span>
<span class="doccomment">/// This is the same as a LC_THREAD, except that a stack is automatically</span>
<span class="doccomment">/// created (based on the shell&#39;s limit for the stack size).  CommandVariant arguments</span>
<span class="doccomment">/// and environment variables are copied onto that stack.</span>
<span class="comment">// unimplemented, see machine/thread_status.h for rest of values:</span>
<span class="comment">// uint32_t flavor		   flavor of thread state</span>
<span class="comment">// uint32_t count		   count of longs in thread state</span>
<span class="comment">// struct XXX_thread_state state   thread state for this flavor</span>
<span class="comment">// ...</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ThreadCommand</span> {
    <span class="doccomment">/// LC_THREAD or  LC_UNIXTHREAD</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// total size of this command</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// flavor of thread state (but you also need to know the `cputype`)</span>
    <span class="kw">pub</span> <span class="ident">flavor</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// number of elements in `thread_state` that are valid</span>
    <span class="kw">pub</span> <span class="ident">count</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// The raw thread state, details of which varies by CPU</span>
    <span class="kw">pub</span> <span class="ident">thread_state</span>: [<span class="ident">u32</span>; <span class="number">70</span>],
}

<span class="kw">impl</span> <span class="ident">ThreadCommand</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">instruction_pointer</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">cputype</span>: <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CpuType</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">error</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span> {
        <span class="comment">// The thread command includes a `flavor` value which distinguishes between related thread</span>
        <span class="comment">// states. However, `dyld` ignores this entirely, blindly interpreting the thread state</span>
        <span class="comment">// values as a machine-specific set of registers matching the build configuration of the</span>
        <span class="comment">// active `dyld` binary.</span>
        <span class="comment">//</span>
        <span class="comment">// Really the only thing that `dyld` cares is that the Mach header&#39;s `cputype`, so that&#39;s</span>
        <span class="comment">// what we use here.</span>
        <span class="kw">match</span> <span class="ident">cputype</span> {
            <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CPU_TYPE_X86</span> <span class="op">=</span><span class="op">&gt;</span> {
                <span class="comment">// struct i386_thread_state_t {</span>
                <span class="comment">//   uint32_t eax;</span>
                <span class="comment">//   uint32_t ebx;</span>
                <span class="comment">//   uint32_t ecx;</span>
                <span class="comment">//   uint32_t edx;</span>
                <span class="comment">//   uint32_t edi;</span>
                <span class="comment">//   uint32_t esi;</span>
                <span class="comment">//   uint32_t ebp;</span>
                <span class="comment">//   uint32_t esp;</span>
                <span class="comment">//   uint32_t ss;</span>
                <span class="comment">//   uint32_t eflags;</span>
                <span class="comment">//   uint32_t eip;</span>
                <span class="comment">//   uint32_t cs;</span>
                <span class="comment">//   uint32_t ds;</span>
                <span class="comment">//   uint32_t es;</span>
                <span class="comment">//   uint32_t fs;</span>
                <span class="comment">//   uint32_t gs;</span>
                <span class="comment">// }</span>
                <span class="kw">let</span> <span class="ident">eip</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">10</span>];
                <span class="prelude-val">Ok</span>(<span class="ident">u64</span>::<span class="ident">from</span>(<span class="ident">eip</span>))
            },
            <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CPU_TYPE_X86_64</span> <span class="op">=</span><span class="op">&gt;</span> {
                <span class="comment">// struct x86_thread_state64_t {</span>
                <span class="comment">//   uint64_t rax;</span>
                <span class="comment">//   uint64_t rbx;</span>
                <span class="comment">//   uint64_t rcx;</span>
                <span class="comment">//   uint64_t rdx;</span>
                <span class="comment">//   uint64_t rdi;</span>
                <span class="comment">//   uint64_t rsi;</span>
                <span class="comment">//   uint64_t rbp;</span>
                <span class="comment">//   uint64_t rsp;</span>
                <span class="comment">//   uint64_t r8;</span>
                <span class="comment">//   uint64_t r9;</span>
                <span class="comment">//   uint64_t r10;</span>
                <span class="comment">//   uint64_t r11;</span>
                <span class="comment">//   uint64_t r12;</span>
                <span class="comment">//   uint64_t r13;</span>
                <span class="comment">//   uint64_t r14;</span>
                <span class="comment">//   uint64_t r15;</span>
                <span class="comment">//   uint64_t rip;</span>
                <span class="comment">//   uint64_t rflags;</span>
                <span class="comment">//   uint64_t cs;</span>
                <span class="comment">//   uint64_t fs;</span>
                <span class="comment">//   uint64_t gs;</span>
                <span class="comment">// }</span>
                <span class="kw">let</span> <span class="ident">rip</span>: <span class="ident">u64</span> <span class="op">=</span>
                       (<span class="ident">u64</span>::<span class="ident">from</span>(<span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">32</span>]))
                    <span class="op">|</span> ((<span class="ident">u64</span>::<span class="ident">from</span>(<span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">33</span>])) <span class="op">&lt;</span><span class="op">&lt;</span> <span class="number">32</span>);
                <span class="prelude-val">Ok</span>(<span class="ident">rip</span>)
            }
            <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CPU_TYPE_ARM</span> <span class="op">=</span><span class="op">&gt;</span> {
                <span class="comment">// struct arm_thread_state32_t {</span>
                <span class="comment">//   uint32_t r[13];</span>
                <span class="comment">//   uint32_t sp;</span>
                <span class="comment">//   uint32_t lr;</span>
                <span class="comment">//   uint32_t pc;</span>
                <span class="comment">//   uint32_t cpsr;</span>
                <span class="comment">// }</span>
                <span class="kw">let</span> <span class="ident">pc</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">15</span>];
                <span class="prelude-val">Ok</span>(<span class="ident">u64</span>::<span class="ident">from</span>(<span class="ident">pc</span>))
            }
            <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CPU_TYPE_ARM64</span> <span class="op">|</span> <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CPU_TYPE_ARM64_32</span> <span class="op">=</span><span class="op">&gt;</span> {
                <span class="comment">// struct arm_thread_state64_t {</span>
                <span class="comment">//   uint64_t x[29];</span>
                <span class="comment">//   uint64_t fp;</span>
                <span class="comment">//   uint64_t lr;</span>
                <span class="comment">//   uint64_t sp;</span>
                <span class="comment">//   uint64_t pc;</span>
                <span class="comment">//   uint32_t cpsr;</span>
                <span class="comment">//   uint32_t pad;</span>
                <span class="comment">// }</span>
                <span class="kw">let</span> <span class="ident">pc</span>: <span class="ident">u64</span> <span class="op">=</span>
                       (<span class="ident">u64</span>::<span class="ident">from</span>(<span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">64</span>]))
                    <span class="op">|</span> ((<span class="ident">u64</span>::<span class="ident">from</span>(<span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">65</span>])) <span class="op">&lt;</span><span class="op">&lt;</span> <span class="number">32</span>);
                <span class="prelude-val">Ok</span>(<span class="ident">pc</span>)
            }
            <span class="comment">// https://github.com/m4b/goblin/issues/64</span>
            <span class="comment">// Probably a G4</span>
            <span class="kw">super</span>::<span class="ident">cputype</span>::<span class="ident">CPU_TYPE_POWERPC</span> <span class="op">=</span><span class="op">&gt;</span> {
                <span class="prelude-val">Ok</span>(<span class="ident">u64</span>::<span class="ident">from</span>(<span class="self">self</span>.<span class="ident">thread_state</span>[<span class="number">0</span>]))
            },
            <span class="comment">// I think the G5 was the last motorola powerpc processor used by apple before switching to intel cpus.</span>
            <span class="comment">// unfortunately I don&#39;t have any binaries on hand to see what its thread state looks like :/</span>
            <span class="comment">// super::cputype::CPU_TYPE_POWERPC64 =&gt; {</span>
            <span class="comment">// }</span>
            <span class="comment">// Assuming above is added, I don&#39;t believe apple ever ported mach-o the mach kernel</span>
            <span class="comment">// (and hence its binary format) to any other machines except the above,</span>
            <span class="comment">// but I would be happy to learn otherwise</span>
            <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> {
                <span class="prelude-val">Err</span>(<span class="ident">error</span>::<span class="ident">Error</span>::<span class="ident">Malformed</span>(<span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;unable to find instruction pointer for cputype {:?}&quot;</span>, <span class="ident">cputype</span>)))
            }
        }
    }
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span><span class="op">&gt;</span> <span class="ident">ctx</span>::<span class="ident">TryFromCtx</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="ident">Endian</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ThreadCommand</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> <span class="kw">crate</span>::<span class="ident">error</span>::<span class="ident">Error</span>;
    <span class="kw">type</span> <span class="ident">Size</span> <span class="op">=</span> <span class="ident">usize</span>;
    <span class="kw">fn</span> <span class="ident">try_from_ctx</span>(<span class="ident">bytes</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> [<span class="ident">u8</span>], <span class="ident">le</span>: <span class="ident">Endian</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">error</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span>(<span class="self">Self</span>, <span class="self">Self</span>::<span class="ident">Size</span>)<span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">lc</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LoadCommandHeader</span><span class="op">&gt;</span>(<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;

        <span class="comment">// read the thread state flavor and length of the thread state</span>
        <span class="kw">let</span> <span class="ident">flavor</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>(<span class="number">8</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="ident">count</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>(<span class="number">12</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;

        <span class="comment">// get a byte slice of the thread state</span>
        <span class="kw">let</span> <span class="ident">thread_state_byte_length</span> <span class="op">=</span> <span class="ident">count</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">*</span> <span class="number">4</span>;
        <span class="kw">let</span> <span class="ident">thread_state_bytes</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">bytes</span>[<span class="number">16</span>..<span class="number">16</span><span class="op">+</span><span class="ident">thread_state_byte_length</span>];

        <span class="comment">// check the length</span>
        <span class="kw">if</span> <span class="ident">thread_state_bytes</span>.<span class="ident">len</span>() <span class="op">&lt;</span> <span class="ident">thread_state_byte_length</span> {
            <span class="kw">return</span> <span class="prelude-val">Err</span>(<span class="ident">error</span>::<span class="ident">Error</span>::<span class="ident">Malformed</span>(<span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;thread command specifies {} bytes for thread state but has only {}&quot;</span>, <span class="ident">thread_state_byte_length</span>, <span class="ident">thread_state_bytes</span>.<span class="ident">len</span>())));
        }
        <span class="kw">if</span> <span class="ident">count</span> <span class="op">&gt;</span> <span class="number">70</span> {
            <span class="kw">return</span> <span class="prelude-val">Err</span>(<span class="ident">error</span>::<span class="ident">Error</span>::<span class="ident">Malformed</span>(<span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;thread command specifies {} longs for thread state but we handle only 70&quot;</span>, <span class="ident">count</span>)));
        }

        <span class="comment">// read the thread state</span>
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">thread_state</span>: [<span class="ident">u32</span>; <span class="number">70</span>] <span class="op">=</span> [ <span class="number">0</span>; <span class="number">70</span> ];
        <span class="kw">for</span> (<span class="ident">i</span>, <span class="ident">state</span>) <span class="kw">in</span> <span class="ident">thread_state</span>.<span class="ident">iter_mut</span>().<span class="ident">enumerate</span>().<span class="ident">take</span>(<span class="ident">count</span> <span class="kw">as</span> <span class="ident">usize</span>) {
            <span class="kw-2">*</span><span class="ident">state</span> <span class="op">=</span> <span class="ident">thread_state_bytes</span>.<span class="ident">pread_with</span>(<span class="ident">i</span><span class="kw-2">*</span><span class="number">4</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;
        }

        <span class="prelude-val">Ok</span>((<span class="ident">ThreadCommand</span>{
            <span class="ident">cmd</span>: <span class="ident">lc</span>.<span class="ident">cmd</span>,
            <span class="ident">cmdsize</span>: <span class="ident">lc</span>.<span class="ident">cmdsize</span>,
            <span class="ident">flavor</span>,
            <span class="ident">count</span>,
            <span class="ident">thread_state</span>,
        }, <span class="ident">lc</span>.<span class="ident">cmdsize</span> <span class="kw">as</span> <span class="kw">_</span>))
    }
}

<span class="kw">impl</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">ThreadCommand</span> {
    <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="kw-2">*</span><span class="self">self</span>
    }
}

<span class="kw">impl</span> <span class="ident">fmt</span>::<span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ThreadCommand</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">fmt</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">fmt</span>::<span class="prelude-ty">Result</span> {
        <span class="ident">fmt</span>.<span class="ident">debug_struct</span>(<span class="string">&quot;ThreadCommand&quot;</span>)
            .<span class="ident">field</span>(<span class="string">&quot;cmd&quot;</span>,          <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">cmd</span>)
            .<span class="ident">field</span>(<span class="string">&quot;cmdsize&quot;</span>,      <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">cmdsize</span>)
            .<span class="ident">field</span>(<span class="string">&quot;flavor&quot;</span>,       <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">flavor</span>)
            .<span class="ident">field</span>(<span class="string">&quot;count&quot;</span>,        <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">count</span>)
            .<span class="ident">field</span>(<span class="string">&quot;thread_state&quot;</span>, <span class="kw-2">&amp;</span><span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">thread_state</span>[..])
            .<span class="ident">finish</span>()
    }
}

<span class="doccomment">/// The routines command contains the address of the dynamic shared library</span>
<span class="doccomment">/// initialization routine and an index into the module table for the module</span>
<span class="doccomment">/// that defines the routine.  Before any modules are used from the library the</span>
<span class="doccomment">/// dynamic linker fully binds the module that defines the initialization routine</span>
<span class="doccomment">/// and then calls it.  This gets called before any module initialization</span>
<span class="doccomment">/// routines (used for C++ static constructors) in the library.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">RoutinesCommand32</span> {
    <span class="doccomment">/// LC_ROUTINES</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:         <span class="ident">u32</span>,
    <span class="doccomment">/// total size of this command</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// address of initialization routine</span>
    <span class="kw">pub</span> <span class="ident">init_address</span>:<span class="ident">u32</span>,
    <span class="doccomment">/// index into the module table that the init routine is defined in</span>
    <span class="kw">pub</span> <span class="ident">init_module</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">reserved1</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">reserved2</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">reserved3</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">reserved4</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">reserved5</span>:   <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">reserved6</span>:   <span class="ident">u32</span>,
}

<span class="doccomment">/// The 64-bit routines command.  Same use as above.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">RoutinesCommand64</span> {
    <span class="doccomment">/// LC_ROUTINES_64</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>:          <span class="ident">u32</span>,
    <span class="doccomment">/// total size of this command</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// address of initialization routine</span>
    <span class="kw">pub</span> <span class="ident">init_address</span>: <span class="ident">u64</span>,
    <span class="doccomment">/// index into the module table that the init routine is defined in 8 bytes each</span>
    <span class="kw">pub</span> <span class="ident">init_module</span>:  <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">reserved1</span>:    <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">reserved2</span>:    <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">reserved3</span>:    <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">reserved4</span>:    <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">reserved5</span>:    <span class="ident">u64</span>,
    <span class="kw">pub</span> <span class="ident">reserved6</span>:    <span class="ident">u64</span>,
}

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SymtabCommand</span> {
  <span class="kw">pub</span> <span class="ident">cmd</span>:     <span class="ident">u32</span>,
  <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
  <span class="kw">pub</span> <span class="ident">symoff</span>:  <span class="ident">u32</span>,
  <span class="kw">pub</span> <span class="ident">nsyms</span>:   <span class="ident">u32</span>,
  <span class="kw">pub</span> <span class="ident">stroff</span>:  <span class="ident">u32</span>,
  <span class="kw">pub</span> <span class="ident">strsize</span>: <span class="ident">u32</span>,
}

<span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">SymtabCommand</span> {
    <span class="kw">fn</span> <span class="ident">default</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="ident">SymtabCommand</span> {
            <span class="ident">cmd</span>: <span class="ident">LC_SYMTAB</span>,
            <span class="ident">cmdsize</span>: <span class="ident">SIZEOF_SYMTAB_COMMAND</span> <span class="kw">as</span> <span class="ident">u32</span>,
            <span class="ident">symoff</span>: <span class="number">0</span>,
            <span class="ident">nsyms</span>: <span class="number">0</span>,
            <span class="ident">stroff</span>: <span class="number">0</span>,
            <span class="ident">strsize</span>: <span class="number">0</span>,
        }
    }
}

<span class="kw">impl</span> <span class="ident">SymtabCommand</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">new</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="ident">Default</span>::<span class="ident">default</span>()
    }
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SYMTAB_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">24</span>;

<span class="doccomment">/// This is the second set of the symbolic information which is used to support</span>
<span class="doccomment">/// the data structures for the dynamically link editor.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The original set of symbolic information in the symtab_command which contains</span>
<span class="doccomment">/// the symbol and string tables must also be present when this load command is</span>
<span class="doccomment">/// present.  When this load command is present the symbol table is organized</span>
<span class="doccomment">/// into three groups of symbols:</span>
<span class="doccomment">/// local symbols (static and debugging symbols) - grouped by module</span>
<span class="doccomment">/// defined external symbols - grouped by module (sorted by name if not lib)</span>
<span class="doccomment">/// undefined external symbols (sorted by name if MH_BINDATLOAD is not set,</span>
<span class="doccomment">///             and in order the were seen by the static</span>
<span class="doccomment">///        linker if MH_BINDATLOAD is set)</span>
<span class="doccomment">/// In this load command there are offsets and counts to each of the three groups</span>
<span class="doccomment">/// of symbols.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This load command contains a the offsets and sizes of the following new</span>
<span class="doccomment">/// symbolic information tables:</span>
<span class="doccomment">/// table of contents</span>
<span class="doccomment">/// module table</span>
<span class="doccomment">/// reference symbol table</span>
<span class="doccomment">/// indirect symbol table</span>
<span class="doccomment">/// The first three tables above (the table of contents, module table and</span>
<span class="doccomment">/// reference symbol table) are only present if the file is a dynamically linked</span>
<span class="doccomment">/// shared library.  For executable and object modules, which are files</span>
<span class="doccomment">/// containing only one module, the information that would be in these three</span>
<span class="doccomment">/// tables is determined as follows:</span>
<span class="doccomment">///  table of contents - the defined external symbols are sorted by name</span>
<span class="doccomment">/// module table - the file contains only one module so everything in the</span>
<span class="doccomment">///         file is part of the module.</span>
<span class="doccomment">/// reference symbol table - is the defined and undefined external symbols</span>
<span class="doccomment">///</span>
<span class="doccomment">/// For dynamically linked shared library files this load command also contains</span>
<span class="doccomment">/// offsets and sizes to the pool of relocation entries for all sections</span>
<span class="doccomment">/// separated into two groups:</span>
<span class="doccomment">/// external relocation entries</span>
<span class="doccomment">/// local relocation entries</span>
<span class="doccomment">/// For executable and object modules the relocation entries continue to hang</span>
<span class="doccomment">/// off the section structures.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DysymtabCommand</span> {
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// index to local symbols</span>
    <span class="kw">pub</span> <span class="ident">ilocalsym</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// number of local symbols</span>
    <span class="kw">pub</span> <span class="ident">nlocalsym</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// index to externally defined symbols</span>
    <span class="kw">pub</span> <span class="ident">iextdefsym</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// number of externally defined symbols</span>
    <span class="kw">pub</span> <span class="ident">nextdefsym</span>:     <span class="ident">u32</span>,
    <span class="doccomment">/// index to undefined symbols</span>
    <span class="kw">pub</span> <span class="ident">iundefsym</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// number of undefined symbols</span>
    <span class="kw">pub</span> <span class="ident">nundefsym</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to table of contents</span>
    <span class="kw">pub</span> <span class="ident">tocoff</span>:         <span class="ident">u32</span>,
    <span class="doccomment">/// number of entries in table of contents</span>
    <span class="kw">pub</span> <span class="ident">ntoc</span>:           <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to module table</span>
    <span class="kw">pub</span> <span class="ident">modtaboff</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// number of module table entries</span>
    <span class="kw">pub</span> <span class="ident">nmodtab</span>:        <span class="ident">u32</span>,
    <span class="doccomment">/// offset to referenced symbol table</span>
    <span class="kw">pub</span> <span class="ident">extrefsymoff</span>:   <span class="ident">u32</span>,
    <span class="doccomment">/// number of referenced symbol table entries</span>
    <span class="kw">pub</span> <span class="ident">nextrefsyms</span>:    <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to the indirect symbol table</span>
    <span class="kw">pub</span> <span class="ident">indirectsymoff</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of indirect symbol table entries</span>
    <span class="kw">pub</span> <span class="ident">nindirectsyms</span>:  <span class="ident">u32</span>,
    <span class="doccomment">/// offset to external relocation entries</span>
    <span class="kw">pub</span> <span class="ident">extreloff</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// number of external relocation entries</span>
    <span class="kw">pub</span> <span class="ident">nextrel</span>:        <span class="ident">u32</span>,
    <span class="doccomment">/// offset to local relocation entries</span>
    <span class="kw">pub</span> <span class="ident">locreloff</span>:      <span class="ident">u32</span>,
    <span class="doccomment">/// number of local relocation entries</span>
    <span class="kw">pub</span> <span class="ident">nlocrel</span>:        <span class="ident">u32</span>,
}

<span class="kw">impl</span> <span class="ident">Default</span> <span class="kw">for</span> <span class="ident">DysymtabCommand</span> {
    <span class="kw">fn</span> <span class="ident">default</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="ident">DysymtabCommand</span> {
            <span class="ident">cmd</span>: <span class="ident">LC_DYSYMTAB</span>,
            <span class="ident">cmdsize</span>: <span class="ident">SIZEOF_DYSYMTAB_COMMAND</span> <span class="kw">as</span> <span class="ident">u32</span>,
            <span class="ident">ilocalsym</span>:      <span class="number">0</span>,
            <span class="ident">nlocalsym</span>:      <span class="number">0</span>,
            <span class="ident">iextdefsym</span>:     <span class="number">0</span>,
            <span class="ident">nextdefsym</span>:     <span class="number">0</span>,
            <span class="ident">iundefsym</span>:      <span class="number">0</span>,
            <span class="ident">nundefsym</span>:      <span class="number">0</span>,
            <span class="ident">tocoff</span>:         <span class="number">0</span>,
            <span class="ident">ntoc</span>:           <span class="number">0</span>,
            <span class="ident">modtaboff</span>:      <span class="number">0</span>,
            <span class="ident">nmodtab</span>:        <span class="number">0</span>,
            <span class="ident">extrefsymoff</span>:   <span class="number">0</span>,
            <span class="ident">nextrefsyms</span>:    <span class="number">0</span>,
            <span class="ident">indirectsymoff</span>: <span class="number">0</span>,
            <span class="ident">nindirectsyms</span>:  <span class="number">0</span>,
            <span class="ident">extreloff</span>:      <span class="number">0</span>,
            <span class="ident">nextrel</span>:        <span class="number">0</span>,
            <span class="ident">locreloff</span>:      <span class="number">0</span>,
            <span class="ident">nlocrel</span>:        <span class="number">0</span>,
        }
    }
}

<span class="kw">impl</span> <span class="ident">DysymtabCommand</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">new</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="ident">Default</span>::<span class="ident">default</span>()
    }
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_DYSYMTAB_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">80</span>;

<span class="comment">// TODO: unimplemented</span>
<span class="doccomment">/// a table of contents entry</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DylibTableOfContents</span> {
    <span class="doccomment">/// the defined external symbol (index into the symbol table)</span>
    <span class="kw">pub</span> <span class="ident">symbol_index</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// index into the module table this symbol is defined in</span>
    <span class="kw">pub</span> <span class="ident">module_index</span>: <span class="ident">u32</span>,
}

<span class="comment">// TODO: unimplemented</span>
<span class="doccomment">/// a module table entry</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DylibModule</span> {
    <span class="doccomment">/// the module name (index into string table)</span>
    <span class="kw">pub</span> <span class="ident">module_name</span>: <span class="ident">u32</span>,
    <span class="doccomment">///index into externally defined symbols</span>
    <span class="kw">pub</span> <span class="ident">iextdefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">///number of externally defined symbols</span>
    <span class="kw">pub</span> <span class="ident">nextdefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// index into reference symbol table</span>
    <span class="kw">pub</span> <span class="ident">irefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">///number of reference symbol table entries</span>
    <span class="kw">pub</span> <span class="ident">nrefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// index into symbols for local symbols</span>
    <span class="kw">pub</span> <span class="ident">ilocalsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">///number of local symbols</span>
    <span class="kw">pub</span> <span class="ident">nlocalsym</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// index into external relocation entries</span>
    <span class="kw">pub</span> <span class="ident">iextrel</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of external relocation entries</span>
    <span class="kw">pub</span> <span class="ident">nextrel</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// low 16 bits are the index into the init section, high 16 bits are the index into the term section</span>
    <span class="kw">pub</span> <span class="ident">iinit_iterm</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// low 16 bits are the number of init section entries, high 16 bits are the number of term section entries</span>
    <span class="kw">pub</span> <span class="ident">ninit_nterm</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the (__OBJC,_module_info) section</span>
    <span class="kw">pub</span> <span class="ident">objc_module_info_addr</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the (__OBJC,__module_info) section</span>
    <span class="kw">pub</span> <span class="ident">objc_module_info_size</span>: <span class="ident">u32</span>,
}

<span class="comment">// TODO: unimplemented</span>
<span class="doccomment">/// a 64-bit module table entry</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DylibModule64</span> {
    <span class="doccomment">/// the module name (index into string table)</span>
    <span class="kw">pub</span> <span class="ident">module_name</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// index into externally defined symbols</span>
    <span class="kw">pub</span> <span class="ident">iextdefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of externally defined symbols</span>
    <span class="kw">pub</span> <span class="ident">nextdefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// index into reference symbol table</span>
    <span class="kw">pub</span> <span class="ident">irefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of reference symbol table entries</span>
    <span class="kw">pub</span> <span class="ident">nrefsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// index into symbols for local symbols</span>
    <span class="kw">pub</span> <span class="ident">ilocalsym</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of local symbols</span>
    <span class="kw">pub</span> <span class="ident">nlocalsym</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// index into external relocation entries</span>
    <span class="kw">pub</span> <span class="ident">iextrel</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of external relocation entries</span>
    <span class="kw">pub</span> <span class="ident">nextrel</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// low 16 bits are the index into the init section, high 16 bits are the index into the term section</span>
    <span class="kw">pub</span> <span class="ident">iinit_iterm</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// low 16 bits are the number of init section entries, high 16 bits are the number of term section entries</span>
    <span class="kw">pub</span> <span class="ident">ninit_nterm</span>: <span class="ident">u32</span>,

    <span class="doccomment">/// the (__OBJC,__module_info) section</span>
    <span class="kw">pub</span> <span class="ident">objc_module_info_size</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the (__OBJC,__module_info) section</span>
    <span class="kw">pub</span> <span class="ident">objc_module_info_addr</span>: <span class="ident">u64</span>,
}

<span class="doccomment">/// The entries in the reference symbol table are used when loading the module</span>
<span class="doccomment">/// (both by the static and dynamic link editors) and if the module is unloaded</span>
<span class="doccomment">/// or replaced.  Therefore all external symbols (defined and undefined) are</span>
<span class="doccomment">/// listed in the module&#39;s reference table.  The flags describe the type of</span>
<span class="doccomment">/// reference that is being made.  The constants for the flags are defined in</span>
<span class="doccomment">/// &lt;mach-o/nlist.h&gt; as they are also used for symbol table entries.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DylibReference</span> {
    <span class="doccomment">/// 24 bits bit-field index into the symbol table</span>
    <span class="kw">pub</span> <span class="ident">isym</span>: [<span class="ident">u8</span>; <span class="number">24</span>],
    <span class="doccomment">/// flags to indicate the type of reference</span>
    <span class="kw">pub</span> <span class="ident">flags</span>: <span class="ident">u64</span>,
}

<span class="doccomment">/// The twolevel_hints_command contains the offset and number of hints in the</span>
<span class="doccomment">/// two-level namespace lookup hints table.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">TwolevelHintsCommand</span> {
    <span class="doccomment">/// LC_TWOLEVEL_HINTS</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct twolevel_hints_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// offset to the hint table</span>
    <span class="kw">pub</span> <span class="ident">offset</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of hints in the hint table</span>
    <span class="kw">pub</span> <span class="ident">nhints</span>: <span class="ident">u32</span>,
}

<span class="doccomment">/// The entries in the two-level namespace lookup hints table are twolevel_hint</span>
<span class="doccomment">/// structs.  These provide hints to the dynamic link editor where to start</span>
<span class="doccomment">/// looking for an undefined symbol in a two-level namespace image.  The</span>
<span class="doccomment">/// isub_image field is an index into the sub-images (sub-frameworks and</span>
<span class="doccomment">/// sub-umbrellas list) that made up the two-level image that the undefined</span>
<span class="doccomment">/// symbol was found in when it was built by the static link editor.  If</span>
<span class="doccomment">/// isub-image is 0 the the symbol is expected to be defined in library and not</span>
<span class="doccomment">/// in the sub-images.  If isub-image is non-zero it is an index into the array</span>
<span class="doccomment">/// of sub-images for the umbrella with the first index in the sub-images being</span>
<span class="doccomment">/// 1. The array of sub-images is the ordered list of sub-images of the umbrella</span>
<span class="doccomment">/// that would be searched for a symbol that has the umbrella recorded as its</span>
<span class="doccomment">/// primary library.  The table of contents index is an index into the</span>
<span class="doccomment">/// library&#39;s table of contents.  This is used as the starting point of the</span>
<span class="doccomment">/// binary search or a directed linear search.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">TwolevelHint</span> {
    <span class="doccomment">/// index into the sub images</span>
    <span class="kw">pub</span> <span class="ident">isub_image</span>: <span class="ident">u64</span>,
    <span class="doccomment">/// 24 bit field index into the table of contents</span>
    <span class="kw">pub</span> <span class="ident">itoc</span>: [<span class="ident">u8</span>; <span class="number">24</span>],
}

<span class="doccomment">/// The prebind_cksum_command contains the value of the original check sum for</span>
<span class="doccomment">/// prebound files or zero.  When a prebound file is first created or modified</span>
<span class="doccomment">/// for other than updating its prebinding information the value of the check sum</span>
<span class="doccomment">/// is set to zero.  When the file has it prebinding re-done and if the value of</span>
<span class="doccomment">/// the check sum is zero the original check sum is calculated and stored in</span>
<span class="doccomment">/// cksum field of this load command in the output file.  If when the prebinding</span>
<span class="doccomment">/// is re-done and the cksum field is non-zero it is left unchanged from the</span>
<span class="doccomment">/// input file.</span>
<span class="comment">// TODO: unimplemented</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">PrebindCksumCommand</span> {
    <span class="doccomment">/// LC_PREBIND_CKSUM</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct prebind_cksum_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// the check sum or zero</span>
    <span class="kw">pub</span> <span class="ident">cksum</span>: <span class="ident">u32</span>,
}

<span class="doccomment">/// The uuid load command contains a single 128-bit unique random number that</span>
<span class="doccomment">/// identifies an object produced by the static link editor.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">UuidCommand</span> {
    <span class="doccomment">/// LC_UUID</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct uuid_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// 16 bytes the 128-bit uuid</span>
    <span class="kw">pub</span> <span class="ident">uuid</span>: [<span class="ident">u8</span>; <span class="number">16</span>],
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_UUID_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">24</span>;

<span class="doccomment">/// The rpath_command contains a path which at runtime should be added to</span>
<span class="doccomment">/// the current run path used to find @rpath prefixed dylibs.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">RpathCommand</span> {
    <span class="doccomment">/// LC_RPATH</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// includes string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// path to add to run path</span>
    <span class="kw">pub</span> <span class="ident">path</span>: <span class="ident">LcStr</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_RPATH_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// The linkedit_data_command contains the offsets and sizes of a blob</span>
<span class="doccomment">/// of data in the __LINKEDIT segment.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">LinkeditDataCommand</span> {
    <span class="doccomment">/// LC_CODE_SIGNATURE, LC_SEGMENT_SPLIT_INFO, LC_FUNCTION_STARTS, LC_DATA_IN_CODE, LC_DYLIB_CODE_SIGN_DRS or LC_LINKER_OPTIMIZATION_HINT.</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct linkedit_data_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset of data in __LINKEDIT segment</span>
    <span class="kw">pub</span> <span class="ident">dataoff</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file size of data in __LINKEDIT segment</span>
    <span class="kw">pub</span> <span class="ident">datasize</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_LINKEDIT_DATA_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">16</span>;

<span class="doccomment">/// The encryption_info_command contains the file offset and size of an</span>
<span class="doccomment">/// of an encrypted segment.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">EncryptionInfoCommand32</span> {
    <span class="doccomment">/// LC_ENCRYPTION_INFO</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct encryption_info_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset of encrypted range</span>
    <span class="kw">pub</span> <span class="ident">cryptoff</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file size of encrypted range</span>
    <span class="kw">pub</span> <span class="ident">cryptsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// which enryption system, 0 means not-encrypted yet</span>
    <span class="kw">pub</span> <span class="ident">cryptid</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_ENCRYPTION_INFO_COMMAND_32</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">20</span>;

<span class="doccomment">/// The encryption_info_command_64 contains the file offset and size of an</span>
<span class="doccomment">/// of an encrypted segment (for use in x86_64 targets).</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">EncryptionInfoCommand64</span> {
    <span class="doccomment">/// LC_ENCRYPTION_INFO_64</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct encryption_info_command_64)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset of encrypted range</span>
    <span class="kw">pub</span> <span class="ident">cryptoff</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file size of encrypted range</span>
    <span class="kw">pub</span> <span class="ident">cryptsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// which enryption system, 0 means not-encrypted yet</span>
    <span class="kw">pub</span> <span class="ident">cryptid</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// padding to make this struct&#39;s size a multiple of 8 bytes</span>
    <span class="kw">pub</span> <span class="ident">pad</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_ENCRYPTION_INFO_COMMAND_64</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">24</span>;

<span class="doccomment">/// The version_min_command contains the min OS version on which this</span>
<span class="doccomment">/// binary was built to run.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// LC_VERSION_MIN_MACOSX or LC_VERSION_MIN_IPHONEOS</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">VersionMinCommand</span> {
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// X.Y.Z is encoded in nibbles xxxx.yy.zz</span>
    <span class="kw">pub</span> <span class="ident">version</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// X.Y.Z is encoded in nibbles xxxx.yy.zz</span>
    <span class="kw">pub</span> <span class="ident">sdk</span>: <span class="ident">u32</span>,
}

<span class="kw">impl</span> <span class="ident">VersionMinCommand</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">new</span>(<span class="ident">is_ios</span>: <span class="ident">bool</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="ident">VersionMinCommand</span> {
            <span class="ident">cmd</span>: <span class="kw">if</span> <span class="ident">is_ios</span> { <span class="ident">LC_VERSION_MIN_IPHONEOS</span> } <span class="kw">else</span> { <span class="ident">LC_VERSION_MIN_MACOSX</span> },
            <span class="ident">cmdsize</span>: <span class="ident">SIZEOF_VERSION_MIN_COMMAND</span> <span class="kw">as</span> <span class="ident">u32</span>,
            <span class="ident">version</span>: <span class="number">0</span>,
            <span class="ident">sdk</span>: <span class="number">0</span>,
        }
    }
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_VERSION_MIN_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">16</span>;

<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Default</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DyldInfoCommand</span> {
    <span class="doccomment">/// LC_DYLD_INFO or LC_DYLD_INFO_ONLY</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct dyld_info_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to rebase info</span>
    <span class="kw">pub</span> <span class="ident">rebase_off</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// size of rebase info</span>
    <span class="kw">pub</span> <span class="ident">rebase_size</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to binding info</span>
    <span class="kw">pub</span> <span class="ident">bind_off</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// size of binding info</span>
    <span class="kw">pub</span> <span class="ident">bind_size</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to weak binding info</span>
    <span class="kw">pub</span> <span class="ident">weak_bind_off</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// size of weak binding info</span>
    <span class="kw">pub</span> <span class="ident">weak_bind_size</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to lazy binding info</span>
    <span class="kw">pub</span> <span class="ident">lazy_bind_off</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// size of lazy binding infs</span>
    <span class="kw">pub</span> <span class="ident">lazy_bind_size</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// file offset to lazy binding info</span>
    <span class="kw">pub</span> <span class="ident">export_off</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// size of lazy binding infs</span>
    <span class="kw">pub</span> <span class="ident">export_size</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_DYLIB_INFO_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">48</span>;

<span class="doccomment">/// The linker_option_command contains linker options embedded in object files.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">LinkerOptionCommand</span> {
    <span class="doccomment">/// LC_LINKER_OPTION only used in MH_OBJECT fipub constypes</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of strings concatenation of zero terminated UTF8 strings. Zero filled at end to align</span>
    <span class="kw">pub</span> <span class="ident">count</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_LINKER_OPTION_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">12</span>;

<span class="doccomment">/// The symseg_command contains the offset and size of the GNU style</span>
<span class="doccomment">/// symbol table information as described in the header file &lt;symseg.h&gt;.</span>
<span class="doccomment">/// The symbol roots of the symbol segments must also be aligned properly</span>
<span class="doccomment">/// in the file.  So the requirement of keeping the offsets aligned to a</span>
<span class="doccomment">/// multiple of a 4 bytes translates to the length field of the symbol</span>
<span class="doccomment">/// roots also being a multiple of a long.  Also the padding must again be</span>
<span class="doccomment">/// zeroed. (THIS IS OBSOLETE and no longer supported).</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SymsegCommand</span> {
    <span class="doccomment">/// LC_SYMSEG</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// sizeof(struct symseg_command)</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// symbol segment offset</span>
    <span class="kw">pub</span> <span class="ident">offset</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// symbol segment size in bytes</span>
    <span class="kw">pub</span> <span class="ident">size</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_SYMSEG_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">16</span>;

<span class="doccomment">/// The ident_command contains a free format string table following the</span>
<span class="doccomment">/// ident_command structure.  The strings are null terminated and the size of</span>
<span class="doccomment">/// the command is padded out with zero bytes to a multiple of 4 bytes/</span>
<span class="doccomment">/// (THIS IS OBSOLETE and no longer supported).</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">IdentCommand</span> {
    <span class="doccomment">/// LC_IDENT</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// strings that follow this command</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_IDENT_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">8</span>;

<span class="doccomment">/// The fvmfile_command contains a reference to a file to be loaded at the</span>
<span class="doccomment">/// specified virtual address.  (Presently, this command is reserved for</span>
<span class="doccomment">/// internal use.  The kernel ignores this command when loading a program into</span>
<span class="doccomment">/// memory).</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">FvmfileCommand</span> {
    <span class="doccomment">/// LC_FVMFILE</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// includes pathname string</span>
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// files pathname</span>
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">LcStr</span>,
    <span class="doccomment">/// files virtual address</span>
    <span class="kw">pub</span> <span class="ident">header_addr</span>: <span class="ident">u32</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_FVMFILE_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">16</span>;

<span class="doccomment">/// The entry_point_command is a replacement for thread_command.</span>
<span class="doccomment">/// It is used for main executables to specify the location (file offset)</span>
<span class="doccomment">/// of main().  If -stack_size was used at link time, the stacksize</span>
<span class="doccomment">/// field will contain the stack size need for the main thread.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">EntryPointCommand</span> {
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// uint64_t file __TEXT offset of main</span>
    <span class="kw">pub</span> <span class="ident">entryoff</span>: <span class="ident">u64</span>,
    <span class="doccomment">/// uint64_t if not zero, initial stack size</span>
    <span class="kw">pub</span> <span class="ident">stacksize</span>: <span class="ident">u64</span>,
}

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">SIZEOF_ENTRY_POINT_COMMAND</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">24</span>;

<span class="doccomment">/// The source_version_command is an optional load command containing</span>
<span class="doccomment">/// the version of the sources used to build the binary.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">SourceVersionCommand</span> {
    <span class="doccomment">/// LC_SOURCE_VERSION</span>
    <span class="kw">pub</span> <span class="ident">cmd</span>: <span class="ident">u32</span>,
    <span class="kw">pub</span> <span class="ident">cmdsize</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// A.B.C.D.E packed as a24.b10.c10.d10.e10</span>
    <span class="kw">pub</span> <span class="ident">version</span>: <span class="ident">u64</span>,
}

<span class="doccomment">/// The LC_DATA_IN_CODE load commands uses a linkedit_data_command</span>
<span class="doccomment">/// to point to an array of data_in_code_entry entries. Each entry</span>
<span class="doccomment">/// describes a range of data in a code section.</span>
<span class="attribute">#[<span class="ident">repr</span>(<span class="ident">C</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Copy</span>, <span class="ident">Pread</span>, <span class="ident">Pwrite</span>, <span class="ident">IOread</span>, <span class="ident">IOwrite</span>, <span class="ident">SizeWith</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DataInCodeEntry</span> {
    <span class="doccomment">/// from mach_header to start of data range</span>
    <span class="kw">pub</span> <span class="ident">offset</span>: <span class="ident">u32</span>,
    <span class="doccomment">/// number of bytes in data range</span>
    <span class="kw">pub</span> <span class="ident">length</span>: <span class="ident">u16</span>,
    <span class="doccomment">/// a DICE_KIND_* value</span>
    <span class="kw">pub</span> <span class="ident">kind</span>: <span class="ident">u16</span>,
}

<span class="comment">///////////////////////////////////////</span>
<span class="comment">// Constants, et. al</span>
<span class="comment">///////////////////////////////////////</span>

<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_REQ_DYLD</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x8000_0000</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LOAD_WEAK_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x18</span> <span class="op">|</span> <span class="ident">LC_REQ_DYLD</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_RPATH</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1c</span> <span class="op">|</span> <span class="ident">LC_REQ_DYLD</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_REEXPORT_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1f</span> <span class="op">|</span> <span class="ident">LC_REQ_DYLD</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_DYLD_INFO_ONLY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x22</span> <span class="op">|</span> <span class="ident">LC_REQ_DYLD</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LOAD_UPWARD_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x23</span> <span class="op">|</span> <span class="ident">LC_REQ_DYLD</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_MAIN</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x28</span> <span class="op">|</span> <span class="ident">LC_REQ_DYLD</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SEGMENT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SYMTAB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x2</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SYMSEG</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x3</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_THREAD</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x4</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_UNIXTHREAD</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x5</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LOADFVMLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x6</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_IDFVMLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x7</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_IDENT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x8</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_FVMFILE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x9</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_PREPAGE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0xa</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_DYSYMTAB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0xb</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LOAD_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0xc</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_ID_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0xd</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LOAD_DYLINKER</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0xe</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_ID_DYLINKER</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0xf</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_PREBOUND_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x10</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_ROUTINES</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x11</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SUB_FRAMEWORK</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x12</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SUB_UMBRELLA</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x13</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SUB_CLIENT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x14</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SUB_LIBRARY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x15</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_TWOLEVEL_HINTS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x16</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_PREBIND_CKSUM</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x17</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SEGMENT_64</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x19</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_ROUTINES_64</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1a</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_UUID</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1b</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_CODE_SIGNATURE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1d</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SEGMENT_SPLIT_INFO</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x1e</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LAZY_LOAD_DYLIB</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x20</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_ENCRYPTION_INFO</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x21</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_DYLD_INFO</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x22</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_VERSION_MIN_MACOSX</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x24</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_VERSION_MIN_IPHONEOS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x25</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_FUNCTION_STARTS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x26</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_DYLD_ENVIRONMENT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x27</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_DATA_IN_CODE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x29</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_SOURCE_VERSION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x2A</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_DYLIB_CODE_SIGN_DRS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x2B</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_ENCRYPTION_INFO_64</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x2C</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LINKER_OPTION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x2D</span>;
<span class="kw">pub</span> <span class="kw">const</span> <span class="ident">LC_LINKER_OPTIMIZATION_HINT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0x2E</span>;

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">cmd_to_str</span>(<span class="ident">cmd</span>: <span class="ident">u32</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> {
    <span class="kw">match</span> <span class="ident">cmd</span> {
        <span class="ident">LC_SEGMENT</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SEGMENT&quot;</span>,
        <span class="ident">LC_SYMTAB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SYMTAB&quot;</span>,
        <span class="ident">LC_SYMSEG</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SYMSEG&quot;</span>,
        <span class="ident">LC_THREAD</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_THREAD&quot;</span>,
        <span class="ident">LC_UNIXTHREAD</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_UNIXTHREAD&quot;</span>,
        <span class="ident">LC_LOADFVMLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LOADFVMLIB&quot;</span>,
        <span class="ident">LC_IDFVMLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_IDFVMLIB&quot;</span>,
        <span class="ident">LC_IDENT</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_IDENT&quot;</span>,
        <span class="ident">LC_FVMFILE</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_FVMFILE&quot;</span>,
        <span class="ident">LC_PREPAGE</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_PREPAGE&quot;</span>,
        <span class="ident">LC_DYSYMTAB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_DYSYMTAB&quot;</span>,
        <span class="ident">LC_LOAD_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LOAD_DYLIB&quot;</span>,
        <span class="ident">LC_ID_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_ID_DYLIB&quot;</span>,
        <span class="ident">LC_LOAD_DYLINKER</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LOAD_DYLINKER&quot;</span>,
        <span class="ident">LC_ID_DYLINKER</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_ID_DYLINKER&quot;</span>,
        <span class="ident">LC_PREBOUND_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_PREBOUND_DYLIB&quot;</span>,
        <span class="ident">LC_ROUTINES</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_ROUTINES&quot;</span>,
        <span class="ident">LC_SUB_FRAMEWORK</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SUB_FRAMEWORK&quot;</span>,
        <span class="ident">LC_SUB_UMBRELLA</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SUB_UMBRELLA&quot;</span>,
        <span class="ident">LC_SUB_CLIENT</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SUB_CLIENT&quot;</span>,
        <span class="ident">LC_SUB_LIBRARY</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SUB_LIBRARY&quot;</span>,
        <span class="ident">LC_TWOLEVEL_HINTS</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_TWOLEVEL_HINTS&quot;</span>,
        <span class="ident">LC_PREBIND_CKSUM</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_PREBIND_CKSUM&quot;</span>,
        <span class="ident">LC_LOAD_WEAK_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LOAD_WEAK_DYLIB&quot;</span>,
        <span class="ident">LC_SEGMENT_64</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SEGMENT_64&quot;</span>,
        <span class="ident">LC_ROUTINES_64</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_ROUTINES_64&quot;</span>,
        <span class="ident">LC_UUID</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_UUID&quot;</span>,
        <span class="ident">LC_RPATH</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_RPATH&quot;</span>,
        <span class="ident">LC_CODE_SIGNATURE</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_CODE_SIGNATURE&quot;</span>,
        <span class="ident">LC_SEGMENT_SPLIT_INFO</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SEGMENT_SPLIT_INFO&quot;</span>,
        <span class="ident">LC_REEXPORT_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_REEXPORT_DYLIB&quot;</span>,
        <span class="ident">LC_LAZY_LOAD_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LAZY_LOAD_DYLIB&quot;</span>,
        <span class="ident">LC_ENCRYPTION_INFO</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_ENCRYPTION_INFO&quot;</span>,
        <span class="ident">LC_DYLD_INFO</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_DYLD_INFO&quot;</span>,
        <span class="ident">LC_DYLD_INFO_ONLY</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_DYLD_INFO_ONLY&quot;</span>,
        <span class="ident">LC_LOAD_UPWARD_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LOAD_UPWARD_DYLIB&quot;</span>,
        <span class="ident">LC_VERSION_MIN_MACOSX</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_VERSION_MIN_MACOSX&quot;</span>,
        <span class="ident">LC_VERSION_MIN_IPHONEOS</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_VERSION_MIN_IPHONEOS&quot;</span>,
        <span class="ident">LC_FUNCTION_STARTS</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_FUNCTION_STARTS&quot;</span>,
        <span class="ident">LC_DYLD_ENVIRONMENT</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_DYLD_ENVIRONMENT&quot;</span>,
        <span class="ident">LC_MAIN</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_MAIN&quot;</span>,
        <span class="ident">LC_DATA_IN_CODE</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_DATA_IN_CODE&quot;</span>,
        <span class="ident">LC_SOURCE_VERSION</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_SOURCE_VERSION&quot;</span>,
        <span class="ident">LC_DYLIB_CODE_SIGN_DRS</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_DYLIB_CODE_SIGN_DRS&quot;</span>,
        <span class="ident">LC_ENCRYPTION_INFO_64</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_ENCRYPTION_INFO_64&quot;</span>,
        <span class="ident">LC_LINKER_OPTION</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LINKER_OPTION&quot;</span>,
        <span class="ident">LC_LINKER_OPTIMIZATION_HINT</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_LINKER_OPTIMIZATION_HINT&quot;</span>,
        <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;LC_UNKNOWN&quot;</span>,
    }
}

<span class="comment">///////////////////////////////////////////</span>
<span class="comment">// Typesafe Command Variants</span>
<span class="comment">///////////////////////////////////////////</span>

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="attribute">#[<span class="ident">allow</span>(<span class="ident">clippy</span>::<span class="ident">large_enum_variant</span>)]</span>
<span class="doccomment">/// The various load commands as a cast-free variant/enum</span>
<span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">CommandVariant</span> {
    <span class="ident">Segment32</span>              (<span class="ident">SegmentCommand32</span>),
    <span class="ident">Segment64</span>              (<span class="ident">SegmentCommand64</span>),
    <span class="ident">Uuid</span>                   (<span class="ident">UuidCommand</span>),
    <span class="ident">Symtab</span>                 (<span class="ident">SymtabCommand</span>),
    <span class="ident">Symseg</span>                 (<span class="ident">SymsegCommand</span>),
    <span class="ident">Thread</span>                 (<span class="ident">ThreadCommand</span>),
    <span class="ident">Unixthread</span>             (<span class="ident">ThreadCommand</span>),
    <span class="ident">LoadFvmlib</span>             (<span class="ident">FvmlibCommand</span>),
    <span class="ident">IdFvmlib</span>               (<span class="ident">FvmlibCommand</span>),
    <span class="ident">Ident</span>                  (<span class="ident">IdentCommand</span>),
    <span class="ident">Fvmfile</span>                (<span class="ident">FvmfileCommand</span>),
    <span class="ident">Prepage</span>                (<span class="ident">LoadCommandHeader</span>),
    <span class="ident">Dysymtab</span>               (<span class="ident">DysymtabCommand</span>),
    <span class="ident">LoadDylib</span>              (<span class="ident">DylibCommand</span>),
    <span class="ident">IdDylib</span>                (<span class="ident">DylibCommand</span>),
    <span class="ident">LoadDylinker</span>           (<span class="ident">DylinkerCommand</span>),
    <span class="ident">IdDylinker</span>             (<span class="ident">DylinkerCommand</span>),
    <span class="ident">PreboundDylib</span>          (<span class="ident">PreboundDylibCommand</span>),
    <span class="ident">Routines32</span>             (<span class="ident">RoutinesCommand32</span>),
    <span class="ident">Routines64</span>             (<span class="ident">RoutinesCommand64</span>),
    <span class="ident">SubFramework</span>           (<span class="ident">SubFrameworkCommand</span>),
    <span class="ident">SubUmbrella</span>            (<span class="ident">SubUmbrellaCommand</span>),
    <span class="ident">SubClient</span>              (<span class="ident">SubClientCommand</span>),
    <span class="ident">SubLibrary</span>             (<span class="ident">SubLibraryCommand</span>),
    <span class="ident">TwolevelHints</span>          (<span class="ident">TwolevelHintsCommand</span>),
    <span class="ident">PrebindCksum</span>           (<span class="ident">PrebindCksumCommand</span>),
    <span class="ident">LoadWeakDylib</span>          (<span class="ident">DylibCommand</span>),
    <span class="ident">Rpath</span>                  (<span class="ident">RpathCommand</span>),
    <span class="ident">CodeSignature</span>          (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">SegmentSplitInfo</span>       (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">ReexportDylib</span>          (<span class="ident">DylibCommand</span>),
    <span class="ident">LazyLoadDylib</span>          (<span class="ident">DylibCommand</span>),
    <span class="ident">EncryptionInfo32</span>       (<span class="ident">EncryptionInfoCommand32</span>),
    <span class="ident">EncryptionInfo64</span>       (<span class="ident">EncryptionInfoCommand64</span>),
    <span class="ident">DyldInfo</span>               (<span class="ident">DyldInfoCommand</span>),
    <span class="ident">DyldInfoOnly</span>           (<span class="ident">DyldInfoCommand</span>),
    <span class="ident">LoadUpwardDylib</span>        (<span class="ident">DylibCommand</span>),
    <span class="ident">VersionMinMacosx</span>       (<span class="ident">VersionMinCommand</span>),
    <span class="ident">VersionMinIphoneos</span>     (<span class="ident">VersionMinCommand</span>),
    <span class="ident">FunctionStarts</span>         (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">DyldEnvironment</span>        (<span class="ident">DylinkerCommand</span>),
    <span class="ident">Main</span>                   (<span class="ident">EntryPointCommand</span>),
    <span class="ident">DataInCode</span>             (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">SourceVersion</span>          (<span class="ident">SourceVersionCommand</span>),
    <span class="ident">DylibCodeSignDrs</span>       (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">LinkerOption</span>           (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">LinkerOptimizationHint</span> (<span class="ident">LinkeditDataCommand</span>),
    <span class="ident">Unimplemented</span>          (<span class="ident">LoadCommandHeader</span>),
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span><span class="op">&gt;</span> <span class="ident">ctx</span>::<span class="ident">TryFromCtx</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="ident">Endian</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">CommandVariant</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> <span class="kw">crate</span>::<span class="ident">error</span>::<span class="ident">Error</span>;
    <span class="kw">type</span> <span class="ident">Size</span> <span class="op">=</span> <span class="ident">usize</span>;
    <span class="kw">fn</span> <span class="ident">try_from_ctx</span>(<span class="ident">bytes</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> [<span class="ident">u8</span>], <span class="ident">le</span>: <span class="ident">Endian</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">error</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span>(<span class="self">Self</span>, <span class="self">Self</span>::<span class="ident">Size</span>)<span class="op">&gt;</span> {
        <span class="kw">use</span> <span class="self">self</span>::<span class="ident">CommandVariant</span>::<span class="kw-2">*</span>;
        <span class="kw">let</span> <span class="ident">lc</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LoadCommandHeader</span><span class="op">&gt;</span>(<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="ident">size</span> <span class="op">=</span> <span class="ident">lc</span>.<span class="ident">cmdsize</span> <span class="kw">as</span> <span class="ident">usize</span>;
        <span class="comment">//println!(&quot;offset {:#x} cmd: {:#x} size: {:?} ctx: {:?}&quot;, offset, lc.cmd, size, le);</span>
        <span class="kw">if</span> <span class="ident">size</span> <span class="op">&gt;</span> <span class="ident">bytes</span>.<span class="ident">len</span>() { <span class="kw">return</span> <span class="prelude-val">Err</span>(<span class="ident">error</span>::<span class="ident">Error</span>::<span class="ident">Malformed</span>(<span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;{} has size larger than remainder of binary: {:?}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">lc</span>, <span class="ident">bytes</span>.<span class="ident">len</span>()))) }
        <span class="kw">match</span> <span class="ident">lc</span>.<span class="ident">cmd</span> {
            <span class="ident">LC_SEGMENT</span>    <span class="op">=</span><span class="op">&gt;</span> {              <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SegmentCommand32</span><span class="op">&gt;</span>       (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Segment32</span>              (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SEGMENT_64</span> <span class="op">=</span><span class="op">&gt;</span> {              <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SegmentCommand64</span><span class="op">&gt;</span>       (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Segment64</span>              (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_DYSYMTAB</span> <span class="op">=</span><span class="op">&gt;</span> {                <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DysymtabCommand</span><span class="op">&gt;</span>        (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Dysymtab</span>               (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LOAD_DYLINKER</span> <span class="op">=</span><span class="op">&gt;</span> {           <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylinkerCommand</span><span class="op">&gt;</span>        (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LoadDylinker</span>           (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_ID_DYLINKER</span> <span class="op">=</span><span class="op">&gt;</span> {             <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylinkerCommand</span><span class="op">&gt;</span>        (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">IdDylinker</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_UUID</span> <span class="op">=</span><span class="op">&gt;</span> {                    <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">UuidCommand</span><span class="op">&gt;</span>            (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Uuid</span>                   (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SYMTAB</span> <span class="op">=</span><span class="op">&gt;</span> {                  <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SymtabCommand</span><span class="op">&gt;</span>          (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Symtab</span>                 (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SYMSEG</span> <span class="op">=</span><span class="op">&gt;</span> {                  <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SymsegCommand</span><span class="op">&gt;</span>          (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Symseg</span>                 (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_THREAD</span> <span class="op">=</span><span class="op">&gt;</span> {                  <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">ThreadCommand</span><span class="op">&gt;</span>          (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Thread</span>                 (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_UNIXTHREAD</span> <span class="op">=</span><span class="op">&gt;</span> {              <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">ThreadCommand</span><span class="op">&gt;</span>          (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Unixthread</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LOADFVMLIB</span> <span class="op">=</span><span class="op">&gt;</span> {              <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">FvmlibCommand</span><span class="op">&gt;</span>          (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LoadFvmlib</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_IDFVMLIB</span> <span class="op">=</span><span class="op">&gt;</span> {                <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">FvmlibCommand</span><span class="op">&gt;</span>          (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">IdFvmlib</span>               (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_IDENT</span> <span class="op">=</span><span class="op">&gt;</span> {                   <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">IdentCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Ident</span>                  (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_FVMFILE</span> <span class="op">=</span><span class="op">&gt;</span> {                 <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">FvmfileCommand</span><span class="op">&gt;</span>         (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Fvmfile</span>                (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_PREPAGE</span> <span class="op">=</span><span class="op">&gt;</span> {                 <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LoadCommandHeader</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Prepage</span>                (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LOAD_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {              <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylibCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LoadDylib</span>              (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_ID_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {                <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylibCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">IdDylib</span>                (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_PREBOUND_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {          <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">PreboundDylibCommand</span><span class="op">&gt;</span>   (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">PreboundDylib</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_ROUTINES</span> <span class="op">=</span><span class="op">&gt;</span> {                <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">RoutinesCommand32</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Routines32</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_ROUTINES_64</span> <span class="op">=</span><span class="op">&gt;</span> {             <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">RoutinesCommand64</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Routines64</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SUB_FRAMEWORK</span> <span class="op">=</span><span class="op">&gt;</span> {           <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SubFrameworkCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">SubFramework</span>           (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SUB_UMBRELLA</span> <span class="op">=</span><span class="op">&gt;</span> {            <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SubUmbrellaCommand</span><span class="op">&gt;</span>     (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">SubUmbrella</span>            (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SUB_CLIENT</span> <span class="op">=</span><span class="op">&gt;</span> {              <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SubClientCommand</span><span class="op">&gt;</span>       (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">SubClient</span>              (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SUB_LIBRARY</span> <span class="op">=</span><span class="op">&gt;</span> {             <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SubLibraryCommand</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">SubLibrary</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_TWOLEVEL_HINTS</span> <span class="op">=</span><span class="op">&gt;</span> {          <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">TwolevelHintsCommand</span><span class="op">&gt;</span>   (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">TwolevelHints</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_PREBIND_CKSUM</span> <span class="op">=</span><span class="op">&gt;</span> {           <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">PrebindCksumCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">PrebindCksum</span>           (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LOAD_WEAK_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {         <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylibCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LoadWeakDylib</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_RPATH</span> <span class="op">=</span><span class="op">&gt;</span> {                   <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">RpathCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Rpath</span>                  (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_CODE_SIGNATURE</span> <span class="op">=</span><span class="op">&gt;</span> {          <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">CodeSignature</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SEGMENT_SPLIT_INFO</span> <span class="op">=</span><span class="op">&gt;</span> {      <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">SegmentSplitInfo</span>       (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_REEXPORT_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {          <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylibCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">ReexportDylib</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LAZY_LOAD_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {         <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylibCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LazyLoadDylib</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_ENCRYPTION_INFO</span> <span class="op">=</span><span class="op">&gt;</span> {         <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">EncryptionInfoCommand32</span><span class="op">&gt;</span>(<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">EncryptionInfo32</span>       (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_ENCRYPTION_INFO_64</span> <span class="op">=</span><span class="op">&gt;</span> {      <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">EncryptionInfoCommand64</span><span class="op">&gt;</span>(<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">EncryptionInfo64</span>       (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_DYLD_INFO</span> <span class="op">=</span><span class="op">&gt;</span> {               <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DyldInfoCommand</span><span class="op">&gt;</span>        (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">DyldInfo</span>               (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_DYLD_INFO_ONLY</span> <span class="op">=</span><span class="op">&gt;</span> {          <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DyldInfoCommand</span><span class="op">&gt;</span>        (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">DyldInfoOnly</span>           (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LOAD_UPWARD_DYLIB</span> <span class="op">=</span><span class="op">&gt;</span> {       <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylibCommand</span><span class="op">&gt;</span>           (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LoadUpwardDylib</span>        (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_VERSION_MIN_MACOSX</span> <span class="op">=</span><span class="op">&gt;</span> {      <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">VersionMinCommand</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">VersionMinMacosx</span>       (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_VERSION_MIN_IPHONEOS</span> <span class="op">=</span><span class="op">&gt;</span> {    <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">VersionMinCommand</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">VersionMinIphoneos</span>     (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_FUNCTION_STARTS</span> <span class="op">=</span><span class="op">&gt;</span> {         <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">FunctionStarts</span>         (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_DYLD_ENVIRONMENT</span> <span class="op">=</span><span class="op">&gt;</span> {        <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">DylinkerCommand</span><span class="op">&gt;</span>        (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">DyldEnvironment</span>        (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_MAIN</span> <span class="op">=</span><span class="op">&gt;</span> {                    <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">EntryPointCommand</span><span class="op">&gt;</span>      (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">Main</span>                   (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_DATA_IN_CODE</span> <span class="op">=</span><span class="op">&gt;</span> {            <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">DataInCode</span>             (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_SOURCE_VERSION</span> <span class="op">=</span><span class="op">&gt;</span> {          <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">SourceVersionCommand</span><span class="op">&gt;</span>   (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">SourceVersion</span>          (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_DYLIB_CODE_SIGN_DRS</span> <span class="op">=</span><span class="op">&gt;</span> {     <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">DylibCodeSignDrs</span>       (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LINKER_OPTION</span> <span class="op">=</span><span class="op">&gt;</span> {           <span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LinkerOption</span>           (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="ident">LC_LINKER_OPTIMIZATION_HINT</span> <span class="op">=</span><span class="op">&gt;</span> {<span class="kw">let</span> <span class="ident">comm</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">LinkeditDataCommand</span><span class="op">&gt;</span>    (<span class="number">0</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;  <span class="prelude-val">Ok</span>((<span class="ident">LinkerOptimizationHint</span> (<span class="ident">comm</span>), <span class="ident">size</span>))},
            <span class="kw">_</span> <span class="op">=</span><span class="op">&gt;</span>                                                                                             <span class="prelude-val">Ok</span>((<span class="ident">Unimplemented</span>          (<span class="ident">lc</span>), <span class="ident">size</span>)),
        }
    }
}

<span class="kw">impl</span> <span class="ident">CommandVariant</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">cmdsize</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">usize</span> {
        <span class="kw">use</span> <span class="self">self</span>::<span class="ident">CommandVariant</span>::<span class="kw-2">*</span>;
        <span class="kw">let</span> <span class="ident">cmdsize</span> <span class="op">=</span> <span class="kw">match</span> <span class="kw-2">*</span><span class="self">self</span> {
            <span class="ident">Segment32</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Segment64</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Uuid</span>                   (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Symtab</span>                 (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Symseg</span>                 (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Thread</span>                 (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Unixthread</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LoadFvmlib</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">IdFvmlib</span>               (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Ident</span>                  (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Fvmfile</span>                (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Prepage</span>                (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Dysymtab</span>               (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LoadDylib</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">IdDylib</span>                (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LoadDylinker</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">IdDylinker</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">PreboundDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Routines32</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Routines64</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">SubFramework</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">SubUmbrella</span>            (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">SubClient</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">SubLibrary</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">TwolevelHints</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">PrebindCksum</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LoadWeakDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Rpath</span>                  (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">CodeSignature</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">SegmentSplitInfo</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">ReexportDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LazyLoadDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">EncryptionInfo32</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">EncryptionInfo64</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">DyldInfo</span>               (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">DyldInfoOnly</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LoadUpwardDylib</span>        (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">VersionMinMacosx</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">VersionMinIphoneos</span>     (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">FunctionStarts</span>         (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">DyldEnvironment</span>        (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Main</span>                   (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">DataInCode</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">SourceVersion</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">DylibCodeSignDrs</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LinkerOption</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">LinkerOptimizationHint</span> (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
            <span class="ident">Unimplemented</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmdsize</span>,
        };
        <span class="ident">cmdsize</span> <span class="kw">as</span> <span class="ident">usize</span>
    }
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">cmd</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">u32</span> {
        <span class="kw">use</span> <span class="self">self</span>::<span class="ident">CommandVariant</span>::<span class="kw-2">*</span>;
        <span class="kw">match</span> <span class="kw-2">*</span><span class="self">self</span> {
            <span class="ident">Segment32</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Segment64</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Uuid</span>                   (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Symtab</span>                 (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Symseg</span>                 (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Thread</span>                 (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Unixthread</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LoadFvmlib</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">IdFvmlib</span>               (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Ident</span>                  (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Fvmfile</span>                (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Prepage</span>                (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Dysymtab</span>               (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LoadDylib</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">IdDylib</span>                (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LoadDylinker</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">IdDylinker</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">PreboundDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Routines32</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Routines64</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">SubFramework</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">SubUmbrella</span>            (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">SubClient</span>              (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">SubLibrary</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">TwolevelHints</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">PrebindCksum</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LoadWeakDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Rpath</span>                  (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">CodeSignature</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">SegmentSplitInfo</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">ReexportDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LazyLoadDylib</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">EncryptionInfo32</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">EncryptionInfo64</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">DyldInfo</span>               (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">DyldInfoOnly</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LoadUpwardDylib</span>        (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">VersionMinMacosx</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">VersionMinIphoneos</span>     (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">FunctionStarts</span>         (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">DyldEnvironment</span>        (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Main</span>                   (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">DataInCode</span>             (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">SourceVersion</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">DylibCodeSignDrs</span>       (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LinkerOption</span>           (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">LinkerOptimizationHint</span> (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
            <span class="ident">Unimplemented</span>          (<span class="ident">comm</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">comm</span>.<span class="ident">cmd</span>,
        }
    }
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="doccomment">/// A tagged LoadCommand union</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">LoadCommand</span> {
    <span class="doccomment">/// The offset this load command occurs at</span>
    <span class="kw">pub</span> <span class="ident">offset</span>: <span class="ident">usize</span>,
    <span class="doccomment">/// Which load command this is inside a variant</span>
    <span class="kw">pub</span> <span class="ident">command</span>: <span class="ident">CommandVariant</span>,
}

<span class="kw">impl</span> <span class="ident">LoadCommand</span> {
    <span class="doccomment">/// Parse a load command from `bytes` at `offset` with the `le` endianness</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">parse</span>(<span class="ident">bytes</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>], <span class="ident">offset</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">usize</span>, <span class="ident">le</span>: <span class="ident">scroll</span>::<span class="ident">Endian</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">error</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="self">Self</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">start</span> <span class="op">=</span> <span class="kw-2">*</span><span class="ident">offset</span>;
        <span class="kw">let</span> <span class="ident">command</span> <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">pread_with</span>::<span class="op">&lt;</span><span class="ident">CommandVariant</span><span class="op">&gt;</span>(<span class="ident">start</span>, <span class="ident">le</span>)<span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="ident">size</span> <span class="op">=</span> <span class="ident">command</span>.<span class="ident">cmdsize</span>();
        <span class="kw-2">*</span><span class="ident">offset</span> <span class="op">=</span> <span class="ident">start</span> <span class="op">+</span> <span class="ident">size</span>;
        <span class="prelude-val">Ok</span>(<span class="ident">LoadCommand</span> { <span class="ident">offset</span>: <span class="ident">start</span>, <span class="ident">command</span> })
    }
}
</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "goblin";</script><script src="../../../aliases.js"></script><script src="../../../main.js"></script><script src="../../../source-script.js"></script><script src="../../../source-files.js"></script><script defer src="../../../search-index.js"></script></body></html>