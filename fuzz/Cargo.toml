[package]
name = "wasmer-bin-fuzz"
version = "0.0.0"
authors = ["Automatically generated"]
publish = false
edition.workspace = true

[package.metadata]
cargo-fuzz = true

[dependencies]
anyhow.workspace = true
wasm-smith.workspace = true
libfuzzer-sys.workspace = true
wasmer = { path = "../lib/api" }
wasmer-compiler-cranelift = { path = "../lib/compiler-cranelift", optional = true }
wasmer-compiler-llvm = { path = "../lib/compiler-llvm", optional = true }
wasmer-compiler-singlepass = { path = "../lib/compiler-singlepass", optional = true }
wasmer-compiler = { path = "../lib/compiler", optional = true }
wasmer-middlewares = { path = "../lib/middlewares" }
wasmprinter.workspace = true

[features]
cranelift = [ "wasmer-compiler-cranelift" ]
llvm = [ "wasmer-compiler-llvm" ]
singlepass = [ "wasmer-compiler-singlepass" ]
universal = [ "wasmer-compiler" ]
wasmer-artifact-load = ["wasmer-compiler/wasmer-artifact-load"]
wasmer-artifact-create = ["wasmer-compiler/wasmer-artifact-create"]
static-artifact-load = ["wasmer-compiler/static-artifact-load"]
static-artifact-create = ["wasmer-compiler/static-artifact-create"]

[[bin]]
name = "equivalence_universal"
path = "fuzz_targets/equivalence_universal.rs"
required-features = ["universal"]

[[bin]]
name = "universal_cranelift"
path = "fuzz_targets/universal_cranelift.rs"
required-features = ["universal", "cranelift"]

[[bin]]
name = "universal_llvm"
path = "fuzz_targets/universal_llvm.rs"
required-features = ["universal", "llvm"]

[[bin]]
name = "universal_singlepass"
path = "fuzz_targets/universal_singlepass.rs"
required-features = ["universal", "singlepass"]

[[bin]]
name = "metering"
path = "fuzz_targets/metering.rs"
required-features = ["universal", "cranelift"]

[[bin]]
name = "deterministic"
path = "fuzz_targets/deterministic.rs"
required-features = ["universal", "cranelift", "llvm", "singlepass"]
